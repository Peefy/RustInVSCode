
# Rustç¬”è®°

## Rustå®‰è£…

å¯¹äºLinuxæˆ–è€…macOSï¼Œä½¿ç”¨ç»ˆç«¯å¹¶è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```
$ curl https://sh.rustup.rs -sSf | sh
```

å¯¹äºWindowsï¼Œ[å®‰è£…é“¾æ¥](https://www.rust-lang.org/tools/install)ï¼Œä»¥åŠVS2013æˆ–æ›´é«˜ç‰ˆæœ¬çš„C++ç”Ÿæˆå·¥å…·ï¼Œæˆ–è€…ä½¿ç”¨VS2019ç›´æ¥å®‰è£…ã€‚

## ç¬¬ä¸€ä¸ªRustç¨‹åº

```rust
fn main() {
    println!("Hello, world!");
}
```

æ³¨æ„ï¼Œ`println!`è°ƒç”¨Rustå®ã€‚å¦‚æœæ”¹ä¸ºè°ƒç”¨å‡½æ•°ï¼Œåˆ™å°†å…¶è¾“å…¥ä¸º`printlnï¼ˆä¸å¸¦!ï¼‰`

## RuståŒ…ç®¡ç†å™¨Cargo

Cargoæ˜¯Rustçš„æ„å»ºç³»ç»Ÿå’ŒåŒ…ç®¡ç†å™¨ã€‚å¤§å¤šæ•°Rustaceansä½¿ç”¨æ­¤å·¥å…·æ¥ç®¡ç†ä»–ä»¬çš„Rusté¡¹ç›®ï¼Œå› ä¸ºCargoä¼šä¸ºå¤„ç†å¾ˆå¤šä»»åŠ¡ï¼Œä¾‹å¦‚æ„å»ºä»£ç ï¼Œä¸‹è½½ä»£ç æ‰€ä¾èµ–çš„åº“ä»¥åŠæ„å»ºè¿™äº›åº“ã€‚

Cargo.toml

```
[package]
name = "hello_cargo"
version = "0.1.0"
authors = ["Your Name <you@example.com>"]
edition = "2018"

[dependencies]
```

ç¬¬ä¸€è¡Œ`[package]`æ˜¯èŠ‚æ ‡é¢˜ï¼ŒæŒ‡ç¤ºä»¥ä¸‹è¯­å¥æ­£åœ¨é…ç½®ç¨‹åºåŒ…ã€‚å½“å‘è¯¥æ–‡ä»¶æ·»åŠ æ›´å¤šä¿¡æ¯æ—¶ï¼Œå°†æ·»åŠ å…¶ä»–éƒ¨åˆ†ã€‚

æ¥ä¸‹æ¥çš„å››è¡Œè®¾ç½®äº†Cargoç¼–è¯‘ç¨‹åºæ‰€éœ€çš„é…ç½®ä¿¡æ¯ï¼šåç§°ï¼Œç‰ˆæœ¬ï¼Œç¼–å†™è€…ä»¥åŠè¦ä½¿ç”¨çš„Rustç‰ˆæœ¬ã€‚Cargoä»çš„ç¯å¢ƒä¸­è·å–çš„å§“åå’Œç”µå­é‚®ä»¶ä¿¡æ¯ï¼Œå› æ­¤ï¼Œå¦‚æœè¯¥ä¿¡æ¯ä¸æ­£ç¡®ï¼Œè¯·ç«‹å³ä¿®å¤æ­¤ä¿¡æ¯ï¼Œç„¶åä¿å­˜æ–‡ä»¶ã€‚å°†editionåœ¨é™„å½•Eä¸­è®¨è®ºå¯†é’¥ã€‚

æœ€åä¸€è¡Œ`[dependencies]`æ˜¯è¯¥éƒ¨åˆ†çš„å¼€å¤´ï¼Œå¯ä»¥åˆ—å‡ºé¡¹ç›®çš„ä»»ä½•ä¾èµ–é¡¹ã€‚

## Rustç¨‹åºè¿›é˜¶

```rust
use std::io; // æ ‡å‡†åº“

/* ä¸»å‡½æ•°å£°æ˜ */
fn main() {
    println!("Guess the number!");

    println!("Please input your guess.");

    /* å¯å˜å˜é‡ */
    let mut guess = String::new();

    /* ä¼ å˜é‡çš„å¼•ç”¨ */
    io::stdin().read_line(&mut guess)
        .expect("Failed to read line");  /* std::result::Result */

    /* ä½¿ç”¨println!å ä½ç¬¦æ‰“å°å€¼ */
    println!("You guessed: {}", guess);

    /* å®šä¹‰ä¸å¯å˜å˜é‡ */
    let x = 5;
    let y = 10;

    println!("x = {} and y = {}", x, y);

}
```

æœ€åä½¿ç”¨`cargo run`æŒ‡ä»¤è¿è¡Œç¨‹åºï¼Œä½¿ç”¨`cargo build`æ„å»ºé¡¹ç›®ï¼Œ

**ä½¿ç”¨Cargo.lockæ–‡ä»¶ç¡®ä¿å¯å¤åˆ¶çš„å†…éƒ¨ç‰ˆæœ¬**

Cargoå…·æœ‰ä¸€ç§æœºåˆ¶ï¼Œå¯ç¡®ä¿æˆ–å…¶ä»–ä»»ä½•äººæ¯æ¬¡æ„å»ºä»£ç æ—¶éƒ½å¯ä»¥é‡å»ºç›¸åŒçš„å·¥ä»¶ï¼šCargoå°†ä»…ä½¿ç”¨æŒ‡å®šçš„ä¾èµ–é¡¹ç‰ˆæœ¬ï¼Œé™¤éå¦æœ‰è¯´æ˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸‹å‘¨å‘å¸ƒçš„ç‰ˆæœ¬ä¸º0.5.6çš„randåŒ…

**äº§ç”Ÿä¸€ä¸ªéšæœºæ•°**

```rust
use std::io;
use rand::Rng;

fn main() {
    println!("Guess the number!");

    let secret_number = rand::thread_rng().gen_range(1, 101);

    println!("The secret number is: {}", secret_number);

    println!("Please input your guess.");

    let mut guess = String::new();

    io::stdin().read_line(&mut guess)
        .expect("Failed to read line");

    println!("You guessed: {}", guess);
}
```

**æ¯”è¾ƒçŒœæµ‹äºç§˜å¯†å·ç **

```rust
use std::io;
use std::cmp::Ordering;
use rand::Rng;

fn main() {
    println!("Guess the number!");

    let secret_number = rand::thread_rng().gen_range(1, 101);

    loop {
        println!("Please input your guess.");

        let mut guess = String::new();

        io::stdin().read_line(&mut guess)
            .expect("Failed to read line");

        let guess: u32 = match guess.trim().parse() {
            Ok(num) => num,
            Err(_) => continue,
        };

        println!("You guessed: {}", guess);

        match guess.cmp(&secret_number) {
            Ordering::Less => println!("Too small!"),
            Ordering::Greater => println!("Too big!"),
            Ordering::Equal => {
                println!("You win!");
                break;
            }
        }
    }
}

```

## RuståŸºæœ¬æ¦‚å¿µ

### Rustå˜é‡å’Œå¯å˜æ€§

é»˜è®¤æƒ…å†µä¸‹å˜é‡æ˜¯ä¸å¯å˜çš„ã€‚è¿™æ˜¯Rustæ¨åŠ¨ç¼–å†™ä»£ç çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒå¯ä»¥åˆ©ç”¨Rustæä¾›çš„å®‰å…¨æ€§å’Œæ˜“å¹¶å‘æ€§ã€‚ä½†æ˜¯ï¼Œä»ç„¶å¯ä»¥é€‰æ‹©ä½¿å˜é‡å¯å˜ã€‚è®©æ¢è®¨ä¸€ä¸‹Rustå¦‚ä½•ä»¥åŠä¸ºä»€ä¹ˆé¼“åŠ±æ”¯æŒä¸å˜æ€§ï¼Œä»¥åŠä¸ºä»€ä¹ˆæœ‰æ—¶å¯èƒ½æƒ³è¦é€€å‡ºã€‚

å½“å˜é‡æ˜¯ä¸å¯å˜çš„æ—¶ï¼Œå°†å€¼ç»‘å®šåˆ°åç§°åï¼Œå°±æ— æ³•æ›´æ”¹è¯¥å€¼ã€‚ä¸ºäº†è¯´æ˜è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨æ¥ åœ¨é¡¹ç›®ç›®å½•ä¸­ç”Ÿæˆä¸€ä¸ªåä¸ºå˜é‡çš„æ–°é¡¹ç›®ã€‚

```rust
fn main() {
    let x = 5;
    println!("The value of x is: {}", x);
    // x = 6;   //error!
    println!("The value of x is: {}", x);
}
```

#### å˜é‡å’Œå¸¸é‡ä¹‹é—´çš„å·®å¼‚

æ— æ³•æ›´æ”¹å˜é‡çš„å€¼å¯èƒ½ä½¿æƒ³èµ·äº†å¤§å¤šæ•°å…¶ä»–è¯­è¨€éƒ½å…·æœ‰çš„å¦ä¸€ä¸ªç¼–ç¨‹æ¦‚å¿µï¼šå¸¸é‡ã€‚åƒä¸å¯å˜å˜é‡ä¸€æ ·ï¼Œå¸¸é‡æ˜¯ç»‘å®šåˆ°åç§°ä¸”ä¸å…è®¸æ›´æ”¹çš„å€¼ï¼Œä½†æ˜¯å¸¸é‡å’Œå˜é‡ä¹‹é—´å­˜åœ¨ä¸€äº›å·®å¼‚ã€‚

é¦–å…ˆï¼Œä¸å…è®¸ä½¿ç”¨`mut`å¸¸é‡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå¸¸é‡ä¸ä»…æ˜¯ä¸å¯å˜çš„ï¼Œå®ƒä»¬å§‹ç»ˆæ˜¯ä¸å¯å˜çš„ã€‚

å¯ä»¥ä½¿ç”¨`const`å…³é”®å­—è€Œä¸æ˜¯å…³é”®å­—å£°æ˜å¸¸é‡letï¼Œå¹¶ä¸”å€¼çš„ç±»å‹å¿…é¡»å¸¦æœ‰æ³¨é‡Šã€‚

å¯ä»¥åœ¨ä»»ä½•èŒƒå›´ï¼ˆåŒ…æ‹¬å…¨å±€èŒƒå›´ï¼‰ä¸­å£°æ˜å¸¸é‡ï¼Œè¿™ä½¿å®ƒä»¬å¯¹äºè®¸å¤šä»£ç éƒ¨åˆ†éœ€è¦äº†è§£çš„å€¼å¾ˆæœ‰ç”¨ã€‚

æœ€åä¸€ä¸ªåŒºåˆ«æ˜¯ï¼Œåªèƒ½å°†å¸¸é‡è®¾ç½®ä¸ºå¸¸é‡è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯å‡½æ•°è°ƒç”¨çš„ç»“æœæˆ–åªèƒ½åœ¨è¿è¡Œæ—¶è®¡ç®—çš„ä»»ä½•å…¶ä»–å€¼ã€‚

è¿™æ˜¯ä¸€ä¸ªå¸¸é‡å£°æ˜çš„ç¤ºä¾‹ï¼Œå…¶ä¸­å¸¸é‡çš„åç§°ä¸º `MAX_POINTS`ï¼Œå…¶å€¼è®¾ç½®ä¸º100,000ã€‚ï¼ˆRustå¸¸é‡çš„å‘½åçº¦å®šæ˜¯ä½¿ç”¨æ‰€æœ‰å¤§å†™å­—æ¯åœ¨å•è¯ä¹‹é—´ä½¿ç”¨ä¸‹åˆ’çº¿ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ•°å­—æ–‡å­—ä¸­æ’å…¥ä¸‹åˆ’çº¿ä»¥æé«˜å¯è¯»æ€§ï¼‰

```rust
fn main() {
const MAX_POINTS: u32 = 100_000;
}
```

### Rustæ•°æ®ç±»å‹

Rustä¸­çš„æ¯ä¸ªå€¼éƒ½å…·æœ‰ç‰¹å®šçš„æ•°æ®ç±»å‹ï¼Œå®ƒå‘Šè¯‰RustæŒ‡å®šäº†å“ªç§æ•°æ®ï¼Œå› æ­¤çŸ¥é“å¦‚ä½•ä½¿ç”¨è¯¥æ•°æ®ã€‚å°†ç ”ç©¶ä¸¤ä¸ªæ•°æ®ç±»å‹å­é›†ï¼šæ ‡é‡å’Œå¤åˆã€‚

è¯·è®°ä½ï¼ŒRustæ˜¯ä¸€ç§é™æ€ç±»å‹çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€å®ƒå¿…é¡»åœ¨ç¼–è¯‘æ—¶çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚ç¼–è¯‘å™¨é€šå¸¸å¯ä»¥æ ¹æ®å€¼ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒæ¥æ¨æ–­è¦ä½¿ç”¨çš„ç±»å‹ã€‚åœ¨å½“è®¸å¤šç±»å‹æ˜¯å¯èƒ½çš„ï¼Œ

```rust
let guess: u32 = "42".parse().expect("Not a number!");
```

#### æ ‡é‡ç±»å‹

æ ‡é‡ç±»å‹è¡¨ç¤ºä¸€ä¸ªå•ä¸€çš„å€¼ã€‚Rustå…·æœ‰å››ç§ä¸»è¦çš„æ ‡é‡ç±»å‹ï¼šæ•´æ•°ï¼Œæµ®ç‚¹æ•°ï¼Œå¸ƒå°”å€¼å’Œå­—ç¬¦ã€‚å¯èƒ½ä¼šä»å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­è¯†åˆ«è¿™äº›ã€‚è®©è·³åˆ°ä»–ä»¬åœ¨Rustä¸­çš„å·¥ä½œæ–¹å¼ã€‚

##### æ•´æ•°ç±»å‹

ä¸€ä¸ªæ•´æ•°æ˜¯æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°ã€‚åœ¨ç¬¬2ç« ä¸­ï¼Œä½¿ç”¨äº†ä¸€ç§æ•´æ•°`u32`ç±»å‹ã€‚æ­¤ç±»å‹å£°æ˜è¡¨ç¤ºä¸ä¹‹å…³è”çš„å€¼åº”ä¸ºå ç”¨32ä½ç©ºé—´çš„æ— ç¬¦å·æ•´æ•°ï¼ˆæœ‰ç¬¦å·æ•´æ•°ç±»å‹ä»¥å¼€å¤´`i`ï¼Œè€Œä¸æ˜¯`u`ï¼‰ã€‚è¡¨3-1æ˜¾ç¤ºäº†Rustä¸­çš„å†…ç½®æ•´æ•°ç±»å‹ã€‚`Signed`å’Œ`Unsigned`åˆ—ä¸­çš„æ¯ä¸ªå˜ä½“ï¼ˆä¾‹å¦‚`i16`ï¼‰éƒ½å¯ä»¥ç”¨æ¥å£°æ˜æ•´æ•°å€¼çš„ç±»å‹ã€‚

é•¿åº¦|	ç¬¦å·|	æ— ç¬¦å·
-|-|-
8ä½|	i8|	u8
16ä½|	i16|	u16
32ä½|	i32|	u32
64ä½|	i64|	u64
128ä½|	i128|	u128

æ¯ä¸ªå˜ä½“å¯ä»¥æ˜¯æœ‰ç¬¦å·çš„ä¹Ÿå¯ä»¥æ˜¯æ— ç¬¦å·çš„ï¼Œå¹¶ä¸”å…·æœ‰æ˜ç¡®çš„å¤§å°ã€‚ å¸¦ç¬¦å·å’Œæ— ç¬¦å·è¡¨ç¤ºæ•°å­—æ˜¯è´Ÿæ•°è¿˜æ˜¯æ­£æ•°ï¼Œæ¢å¥è¯è¯´ï¼Œæ•°å­—æ˜¯å¦éœ€è¦å¸¦æœ‰æ­£è´Ÿå·ï¼ˆå¸¦æ­£è´Ÿå·ï¼‰ï¼Œæˆ–è€…æ•°å­—å°†æ°¸è¿œæ˜¯æ­£æ•°ï¼Œå› æ­¤å¯ä»¥ä¸å¸¦æ­£è´Ÿå·è¡¨ç¤ºï¼ˆæœªç­¾åï¼‰ã€‚è¿™å°±åƒåœ¨çº¸ä¸Šå†™æ•°å­—ä¸€æ ·ï¼šå½“ç¬¦å·å¾ˆé‡è¦æ—¶ï¼Œæ•°å­—ä¸Šä¼šæ˜¾ç¤ºåŠ å·æˆ–å‡å·ã€‚ä½†æ˜¯ï¼Œå¯ä»¥æ”¾å¿ƒåœ°å‡è®¾æ•°å­—ä¸ºæ­£æ•°æ—¶ï¼Œå®ƒä¸ä¼šæ˜¾ç¤ºä»»ä½•ç¬¦å·ã€‚å¸¦ç¬¦å·çš„æ•°å­—ä½¿ç”¨äºŒè¿›åˆ¶è¡¥ç è¡¨ç¤ºå­˜å‚¨ã€‚

æ¯ä¸ªå¸¦ç¬¦å·çš„å˜é‡å¯ä»¥å­˜å‚¨\[-2^{n - 1}\]åˆ°\[ 2^{n-1}-1 \]ä¹‹é—´çš„æ•°å­—ï¼Œå…¶ä¸­næ˜¯å˜é‡ä½¿ç”¨çš„ä½æ•°ã€‚å› æ­¤ï¼Œä¸€ä¸ª `i8`å¯ä»å­˜å‚¨-128è‡³127ï¼Œå…¶ç­‰äº-128åˆ°127æ— ç¬¦å·çš„å˜ä½“å¯ä»¥å­˜å‚¨ä»0ç¼–å·.

æ­¤å¤–ï¼Œ`isize`å’Œ`usize`ç±»å‹å–å†³äºçš„ç¨‹åºæ‰€è¿è¡Œçš„è®¡ç®—æœºç±»å‹ï¼šå¦‚æœä½¿ç”¨çš„æ˜¯64ä½ä½“ç³»ç»“æ„ï¼Œåˆ™ä¸º64ä½ï¼›å¦‚æœä½¿ç”¨çš„æ˜¯32ä½ä½“ç³»ç»“æ„ï¼Œåˆ™ä¸º32ä½ã€‚

æ•°å­—æ–‡å­—|	ä¾‹
-|-
å°æ•°|	`98_222`
åå…­è¿›åˆ¶|	`0xff`
å…«è¿›åˆ¶|	`0o77`
äºŒå…ƒ|	`0b1111_0000`
å­—èŠ‚ï¼ˆ`u8`ï¼‰|	`b'A'`

##### æµ®ç‚¹ç±»å‹

Rustå¯¹äºæµ®ç‚¹æ•°ä¹Ÿæœ‰ä¸¤ç§åŸå§‹ç±»å‹ï¼Œå³å¸¦å°æ•°ç‚¹çš„æ•°å­—ã€‚Rustçš„æµ®ç‚¹ç±»å‹ä¸ºf32å’Œf64ï¼Œå¤§å°åˆ†åˆ«ä¸º32ä½å’Œ64ä½ã€‚é»˜è®¤ç±»å‹æ˜¯f64 å› ä¸ºåœ¨ç°ä»£CPUä¸Šï¼Œå®ƒçš„é€Ÿåº¦ä¸ä¹‹å¤§è‡´ç›¸åŒï¼Œf32ä½†ç²¾åº¦æ›´é«˜ã€‚

##### æ•°å€¼è¿ç®—

Rustæ”¯æŒæœŸæœ›æ‰€æœ‰æ•°å­—ç±»å‹çš„åŸºæœ¬æ•°å­¦è¿ç®—ï¼šåŠ ï¼Œå‡ï¼Œä¹˜ï¼Œé™¤å’Œä½™æ•°ã€‚ä»¥ä¸‹ä»£ç æ˜¾ç¤ºäº†å¦‚ä½•åœ¨letè¯­å¥ä¸­ä½¿ç”¨æ¯ä¸ªä»£ç 

```rust
fn main() {
    // addition
    let sum = 5 + 10;

    // subtraction
    let difference = 95.5 - 4.3;

    // multiplication
    let product = 4 * 30;

    // division
    let quotient = 56.7 / 32.2;

    // remainder
    let remainder = 43 % 5;
}
```

##### å¸ƒå°”ç±»å‹

ä¸å¤§å¤šæ•°å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒRustä¸­çš„å¸ƒå°”ç±»å‹å…·æœ‰ä¸¤ä¸ªå¯èƒ½çš„å€¼ï¼štrueå’Œfalseã€‚å¸ƒå°”å€¼çš„å¤§å°ä¸º1ä¸ªå­—èŠ‚ã€‚Rustä¸­çš„å¸ƒå°”ç±»å‹ä½¿ç”¨æŒ‡å®šboolã€‚ä¾‹å¦‚ï¼š

```rust
fn main() {
    let t = true;

    let f: bool = false; // with explicit type annotation
}
```

##### å­—ç¬¦ç±»å‹

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä»…å¤„ç†æ•°å­—ï¼Œä½†æ˜¯Rustä¹Ÿæ”¯æŒå­—æ¯ã€‚Rustçš„ charç±»å‹æ˜¯è¯¥è¯­è¨€æœ€åŸå§‹çš„å­—æ¯ç±»å‹ï¼Œä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†ä¸€ç§ä½¿ç”¨å®ƒçš„æ–¹å¼ã€‚ï¼ˆè¯·æ³¨æ„ï¼Œcharæ–‡å­—æ˜¯ç”¨å•å¼•å·æŒ‡å®šçš„ï¼Œè€Œå­—ç¬¦ä¸²æ–‡å­—æ˜¯ä½¿ç”¨åŒå¼•å·çš„ã€‚ï¼‰

```rust
fn main() {
    let c = 'z';
    let z = 'â„¤';
    let heart_eyed_cat = 'ğŸ˜»';
}
```

Rustçš„`char`ç±»å‹ä¸º4ä¸ªå­—èŠ‚ï¼Œä»£è¡¨Unicodeæ ‡é‡å€¼ï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥ä»£è¡¨çš„ä¸ä»…ä»…æ˜¯ASCIIã€‚é‡éŸ³å­—æ¯ï¼›ä¸­æ–‡ï¼Œæ—¥æ–‡å’ŒéŸ©æ–‡å­—ç¬¦ï¼›è¡¨æƒ…ç¬¦å· å’Œé›¶å®½åº¦ç©ºæ ¼charåœ¨Rust ä¸­éƒ½æ˜¯æœ‰æ•ˆå€¼ã€‚Unicodeæ ‡å€¼çš„èŒƒå›´ä»`U+0000`åˆ° `U+D7FF`å’Œ`U+E000`åˆ°`U+10FFFF`åŒ…å®¹æ€§ã€‚ä½†æ˜¯ï¼Œâ€œå­—ç¬¦â€åœ¨Unicodeä¸­å¹¶ä¸æ˜¯çœŸæ­£çš„æ¦‚å¿µï¼Œå› æ­¤å¯¹â€œå­—ç¬¦â€æ˜¯ä»€ä¹ˆçš„ç›´è§‰å¯èƒ½ä¸`char`Rustä¸­çš„a ä¸ä¸€è‡´ã€‚

##### å¤åˆç±»å‹

å¤åˆç±»å‹å¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆä¸ºä¸€ç§ç±»å‹ã€‚Rustæœ‰ä¸¤ç§åŸå§‹çš„å¤åˆç±»å‹ï¼šå…ƒç»„å’Œæ•°ç»„ã€‚

###### å…ƒç»„ç±»å‹

å…ƒç»„æ˜¯ä¸€ç§å°†å¤šç§ç±»å‹çš„å€¼ç»„åˆä¸ºä¸€ä¸ªå¤åˆç±»å‹çš„ä¸€èˆ¬æ–¹æ³•ã€‚å…ƒç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼šå£°æ˜åï¼Œå®ƒä»¬çš„å¤§å°å°±æ— æ³•å¢é•¿æˆ–ç¼©å°ã€‚

é€šè¿‡åœ¨æ‹¬å·å†…ç¼–å†™é€—å·åˆ†éš”çš„å€¼åˆ—è¡¨æ¥åˆ›å»ºå…ƒç»„ã€‚å…ƒç»„ä¸­çš„æ¯ä¸ªä½ç½®éƒ½æœ‰ä¸€ä¸ªç±»å‹ï¼Œå¹¶ä¸”å…ƒç»„ä¸­ä¸åŒå€¼çš„ç±»å‹ä¸å¿…ç›¸åŒã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ·»åŠ äº†å¯é€‰çš„ç±»å‹æ³¨é‡Šï¼š

```rust
fn main() {
    let tup: (i32, f64, u8) = (500, 6.4, 1);
    let (x, y, z) = tup;
    println!("The value of y is: {}", y);
}
```

ç¨‹åºé¦–å…ˆåˆ›å»ºä¸€ä¸ªå…ƒç»„å¹¶å°†å…¶ç»‘å®šåˆ°å˜é‡`tup`ã€‚ç„¶åï¼Œå®ƒä½¿ç”¨å¸¦æœ‰`let`é‡‡å–`tup`å¹¶æŠŠå®ƒå˜æˆä¸‰ä¸ªç‹¬ç«‹çš„å˜é‡`x`ï¼Œ`y`å’Œ`z`ã€‚è¿™ç§°ä¸ºè§£æ„ï¼Œå› ä¸ºå®ƒå°†å•ä¸ªå…ƒç»„åˆ†ä¸ºä¸‰éƒ¨åˆ†ã€‚æœ€åï¼Œç¨‹åºå°†è¾“å‡ºçš„å€¼ `y`ï¼Œå³`6.4`ã€‚

é™¤äº†é€šè¿‡æ¨¡å¼åŒ¹é…è¿›è¡Œç»“æ„åˆ†è§£ä¹‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨å¥ç‚¹ï¼ˆ.ï¼‰å’Œè¦è®¿é—®çš„å€¼çš„ç´¢å¼•ç›´æ¥è®¿é—®å…ƒç»„å…ƒç´ ã€‚ä¾‹å¦‚ï¼š

```rust
fn main() {
    let x: (i32, f64, u8) = (500, 6.4, 1);

    let five_hundred = x.0;

    let six_point_four = x.1;

    let one = x.2;
}
```

###### æ•°ç»„ç±»å‹

æ”¶é›†å¤šä¸ªå€¼çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æ•°ç»„ã€‚ä¸å…ƒç»„ä¸åŒï¼Œæ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½å¿…é¡»å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚Rustä¸­çš„æ•°ç»„ä¸æŸäº›å…¶ä»–è¯­è¨€ä¸­çš„æ•°ç»„ä¸åŒï¼Œå› ä¸ºRustä¸­çš„æ•°ç»„å…·æœ‰å›ºå®šé•¿åº¦ï¼Œä¾‹å¦‚å…ƒç»„ã€‚

```rust
fn main() {
    let a = [1, 2, 3, 4, 5];
}
```

å½“å¸Œæœ›å°†æ•°æ®åˆ†é…åœ¨å †æ ˆè€Œä¸æ˜¯å †ä¸Šæ—¶ï¼ˆå½“åœ¨ç¬¬4ç« ä¸­è®¨è®ºå †æ ˆå’Œå †æ—¶ï¼‰ï¼Œæˆ–è€…è¦ç¡®ä¿å§‹ç»ˆæ‹¥æœ‰å›ºå®šæ•°é‡çš„å…ƒç´ æ—¶ï¼Œæ•°ç»„å¾ˆæœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸åƒçŸ¢é‡ç±»å‹é‚£æ ·çµæ´»ã€‚è½½ä½“æ˜¯ç”±æ ‡å‡†åº“æä¾›ä¸€ä¸ªç±»ä¼¼é›†åˆç±»å‹æ˜¯å…è®¸ç”Ÿé•¿æˆ–å°ºå¯¸çš„ç¼©å°ã€‚å¦‚æœä¸ç¡®å®šä½¿ç”¨æ•°ç»„è¿˜æ˜¯å‘é‡ï¼Œåˆ™å¯èƒ½åº”è¯¥ä½¿ç”¨å‘é‡ã€‚ç¬¬8ç« å°†æ›´è¯¦ç»†åœ°è®¨è®ºå‘é‡ã€‚

ä¸€ä¸ªç¨‹åºå¯èƒ½éœ€è¦ä½¿ç”¨æ•°ç»„è€Œä¸æ˜¯å‘é‡ï¼Œä¾‹å¦‚ï¼Œè¯¥ç¨‹åºéœ€è¦çŸ¥é“ä¸€å¹´ä¸­å„ä¸ªæœˆä»½çš„åç§°ã€‚è¿™æ ·çš„ç¨‹åºä¸å¤ªå¯èƒ½éœ€è¦æ·»åŠ æˆ–åˆ é™¤æœˆä»½ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ•°ç»„ï¼Œå› ä¸ºçŸ¥é“å®ƒå°†å§‹ç»ˆåŒ…å«12ä¸ªå…ƒç´ ï¼š

```rust

#![allow(unused_variables)]
fn main() {
let months = ["January", "February", "March", "April", "May", "June", "July",
              "August", "September", "October", "November", "December"];
}
```

å°†ä½¿ç”¨æ–¹æ‹¬å·ç¼–å†™æ•°ç»„çš„ç±»å‹ï¼Œå¹¶ä¸”åœ¨æ–¹æ‹¬å·å†…åŒ…æ‹¬æ¯ä¸ªå…ƒç´ çš„ç±»å‹ï¼Œåˆ†å·ï¼Œç„¶åæ˜¯æ•°ç»„ä¸­å…ƒç´ çš„æ•°é‡ï¼Œå¦‚ä¸‹æ‰€ç¤º

```rust

#![allow(unused_variables)]
fn main() {
let a: [i32; 5] = [1, 2, 3, 4, 5];
}
```

åœ¨è¿™é‡Œï¼Œ`i32`æ˜¯æ¯ä¸ªå…ƒç´ çš„ç±»å‹ã€‚åˆ†å·åçš„æ•°å­—`5` è¡¨ç¤ºæ•°ç»„åŒ…å«äº”ä¸ªå…ƒç´ ã€‚

ä»¥è¿™ç§æ–¹å¼ç¼–å†™æ•°ç»„çš„ç±»å‹çœ‹èµ·æ¥ç±»ä¼¼äºåˆå§‹åŒ–æ•°ç»„çš„å¦ä¸€ç§è¯­æ³•ï¼šå¦‚æœè¦åˆ›å»ºä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«ç›¸åŒçš„å€¼ï¼Œåˆ™å¯ä»¥æŒ‡å®šåˆå§‹å€¼ï¼Œåè·Ÿä¸€ä¸ªåˆ†å·ï¼Œç„¶åæŒ‡å®šé•¿åº¦æ•°ç»„æ”¾åœ¨æ–¹æ‹¬å·ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust

#![allow(unused_variables)]
fn main() {
let a = [3; 5];
}
```

åä¸ºçš„æ•°ç»„`a`å°†åŒ…å«`5`å°†å…¨éƒ¨è®¾ç½®ä¸º`3`åˆå§‹å€¼çš„å…ƒç´  ã€‚è¿™ä¸å†™ä½œç›¸åŒï¼Œ`let a = [3, 3, 3, 3, 3]`;ä½†æ›´ä¸ºç®€æ´ã€‚

###### è®¿é—®æ•°ç»„å…ƒç´ 

æ•°ç»„æ˜¯åœ¨å †æ ˆä¸Šåˆ†é…çš„å•ä¸ªå†…å­˜å—ã€‚å¯ä»¥ä½¿ç”¨ç´¢å¼•è®¿é—®æ•°ç»„çš„å…ƒç´ ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
fn main() {
    let a = [1, 2, 3, 4, 5];

    let first = a[0];
    let second = a[1];
}

```

åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œåä¸ºçš„å˜é‡`first`å°†è·å¾—å€¼`1`ï¼Œå› ä¸ºè¿™æ˜¯`[0]`æ•°ç»„ä¸­indexå¤„çš„å€¼ã€‚åä¸ºçš„å˜é‡`second`å°†ä»æ•°ç»„ä¸­çš„`2`ç´¢å¼•è·å–å€¼`[1]`ã€‚

### Rustå‡½æ•°

Rustä»£ç ä¸­æ™®éå­˜åœ¨å‡½æ•°ã€‚å·²ç»çœ‹åˆ°äº†è¯¥è¯­è¨€ä¸­æœ€é‡è¦çš„åŠŸèƒ½ä¹‹ä¸€ï¼šmainå‡½æ•°ï¼Œå®ƒæ˜¯è®¸å¤šç¨‹åºçš„å…¥å£ç‚¹ã€‚è¿˜çœ‹åˆ°äº†fnå…³é”®å­—ï¼Œè¯¥å…³é”®å­—ä½¿å¯ä»¥å£°æ˜æ–°åŠŸèƒ½ã€‚

Rustä»£ç ä½¿ç”¨è›‡å½¢å¤§å°å†™ä½œä¸ºå‡½æ•°å’Œå˜é‡åçš„å¸¸è§„æ ·å¼ã€‚åœ¨è›‡å½¢çš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰å­—æ¯å‡ä¸ºå°å†™ï¼Œå¹¶åœ¨ä¸‹åˆ’çº¿åˆ†å¼€å•è¯ã€‚è¿™æ˜¯ä¸€ä¸ªåŒ…å«ç¤ºä¾‹å‡½æ•°å®šä¹‰çš„ç¨‹åºï¼š

```rust
fn main() {
    println!("Hello, world!");

    another_function();
}

fn another_function() {
    println!("Another function.");
}

```

Rustä¸­çš„å‡½æ•°å®šä¹‰ä»¥`fn`å‡½æ•°åç§°å¼€å¤´ï¼Œå¹¶åœ¨å‡½æ•°åç§°åå¸¦æœ‰ä¸€ç»„æ‹¬å·ã€‚å¤§æ‹¬å·å‘Šè¯‰ç¼–è¯‘å™¨å‡½æ•°ä½“çš„å¼€å§‹å’Œç»“æŸä½ç½®ã€‚

å¯ä»¥è°ƒç”¨å®šä¹‰çš„ä»»ä½•å‡½æ•°ï¼Œæ–¹æ³•æ˜¯è¾“å…¥å…¶åç§°ï¼Œç„¶åè¾“å…¥ä¸€ç»„æ‹¬å·ã€‚å› ä¸º`another_function`æ˜¯åœ¨ç¨‹åºä¸­å®šä¹‰çš„ï¼Œæ‰€ä»¥å¯ä»¥ä»`main`å‡½æ•°å†…éƒ¨è°ƒç”¨å®ƒã€‚æ³¨æ„ï¼Œåœ¨æºä»£ç ä¸­çš„å‡½æ•°`another_function` ä¹‹åå®šä¹‰`main`ï¼›æœ¬æ¥ä¹Ÿå¯ä»¥å®šä¹‰å®ƒã€‚Rustä¸åœ¨ä¹åœ¨ä½•å¤„å®šä¹‰å‡½æ•°ï¼Œåªéœ€åœ¨æŸä¸ªåœ°æ–¹å®šä¹‰å®ƒä»¬å³å¯ã€‚

è®©å¼€å§‹ä¸€ä¸ªæ–°çš„åä¸ºå‡½æ•°çš„äºŒè¿›åˆ¶é¡¹ç›®ï¼Œä»¥è¿›ä¸€æ­¥æ¢ç´¢å‡½æ•°ã€‚å°†another_functionç¤ºä¾‹æ”¾åœ¨src / main.rsä¸­å¹¶è¿è¡Œå®ƒã€‚åº”è¯¥çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š

#### å‡½æ•°å‚æ•°

ä¹Ÿå¯ä»¥å°†å‡½æ•°å®šä¹‰ä¸ºå…·æœ‰parametersï¼Œparametersæ˜¯ä½œä¸ºå‡½æ•°ç­¾åä¸€éƒ¨åˆ†çš„ç‰¹æ®Šå˜é‡ã€‚å½“å‡½æ•°å…·æœ‰å‚æ•°æ—¶ï¼Œå¯ä»¥ä¸ºå…¶æä¾›è¿™äº›å‚æ•°çš„å…·ä½“å€¼ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼Œå…·ä½“å€¼ç§°ä¸ºè‡ªå˜é‡ï¼Œä½†æ˜¯åœ¨éšæ„çš„äº¤è°ˆä¸­ï¼Œäººä»¬å€¾å‘äºå°†å‚æ•°å’Œè‡ªå˜é‡ä¸€è¯äº¤æ›¿ç”¨äºå‡½æ•°å®šä¹‰ä¸­çš„å˜é‡æˆ–è°ƒç”¨å‡½æ•°æ—¶ä¼ é€’çš„å…·ä½“å€¼ã€‚

ä»¥ä¸‹é‡å†™çš„ç‰ˆæœ¬`another_function`æ˜¾ç¤ºäº†Rustä¸­çš„å‚æ•°ï¼š

```rust
fn main() {
    another_function(5);
}

fn another_function(x: i32) {
    println!("The value of x is: {}", x);
}

```

å½“å¸Œæœ›ä¸€ä¸ªå‡½æ•°å…·æœ‰å¤šä¸ªå‚æ•°æ—¶ï¼Œè¯·ç”¨é€—å·åˆ†éš”å‚æ•°å£°æ˜ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
fn main() {
    another_function(5, 6);
}

fn another_function(x: i32, y: i32) {
    println!("The value of x is: {}", x);
    println!("The value of y is: {}", y);
}
```

#### å‡½æ•°å®ä½“åŒ…å«è¯­å¥å’Œè¡¨è¾¾å¼

å‡½æ•°ä½“ç”±ä¸€ç³»åˆ—å¯é€‰åœ°ä»¥è¡¨è¾¾å¼ç»“å°¾çš„è¯­å¥ç»„æˆã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä»…ä»‹ç»äº†æ²¡æœ‰ç»“å°¾è¡¨è¾¾å¼çš„å‡½æ•°ï¼Œä½†æ˜¯å·²ç»å°†è¡¨è¾¾å¼è§†ä¸ºè¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚ç”±äºRustæ˜¯ä¸€ç§åŸºäºè¡¨è¾¾å¼çš„è¯­è¨€ï¼Œå› æ­¤è¿™æ˜¯éœ€è¦ç†è§£çš„é‡è¦åŒºåˆ«ã€‚å…¶ä»–è¯­è¨€æ²¡æœ‰ç›¸åŒçš„åŒºåˆ«ï¼Œå› æ­¤è®©çœ‹çœ‹ä»€ä¹ˆæ˜¯è¯­å¥å’Œè¡¨è¾¾å¼ä»¥åŠå®ƒä»¬çš„å·®å¼‚å¦‚ä½•å½±å“å‡½æ•°ä½“ã€‚

å®é™…ä¸Šå·²ç»ä½¿ç”¨è¿‡è¯­å¥å’Œè¡¨è¾¾å¼ã€‚è¯­å¥æ˜¯æ‰§è¡ŒæŸäº›æ“ä½œä¸”ä¸è¿”å›å€¼çš„æŒ‡ä»¤ã€‚è¡¨è¾¾å¼çš„ è®¡ç®—ç»“æœä¸ºç»“æœå€¼ã€‚è®©çœ‹ä¸€äº›ä¾‹å­ã€‚

åˆ›å»ºå˜é‡å¹¶ä½¿ç”¨`let`å…³é”®å­—ä¸ºå…¶åˆ†é…å€¼æ˜¯ä¸€æ¡è¯­å¥ã€‚

```rust
fn main() {
    let x = 5;

    let y = {
        let x = 3;
        x + 1
    };

    println!("The value of y is: {}", y);
}
```

æ˜¯åœ¨è¿™ç§æƒ…å†µä¸‹æ±‚å€¼ä¸ºçš„å—`4`ã€‚è¯¥å€¼ç»‘å®š`y` ä¸º`let`è¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚è¯·æ³¨æ„ï¼Œè¯¥`x + 1`è¡Œçš„æœ«å°¾æ²¡æœ‰åˆ†å·ï¼Œè¿™ä¸åˆ°ç›®å‰ä¸ºæ­¢æ‰€çœ‹åˆ°çš„å¤§å¤šæ•°è¡Œä¸åŒã€‚è¡¨è¾¾å¼ä¸åŒ…æ‹¬ç»“å°¾åˆ†å·ã€‚å¦‚æœåœ¨è¡¨è¾¾å¼çš„æœ«å°¾æ·»åŠ åˆ†å·ï¼Œåˆ™å°†å…¶å˜æˆä¸€æ¡è¯­å¥ï¼Œç„¶åè¯¥è¯­å¥å°†ä¸è¿”å›å€¼ã€‚åœ¨æ¥ä¸‹æ¥æ¢ç´¢å‡½æ•°è¿”å›å€¼å’Œè¡¨è¾¾å¼æ—¶ï¼Œè¯·è®°ä½è¿™ä¸€ç‚¹ã€‚

#### å…·æœ‰è¿”å›å€¼çš„å‡½æ•°

å‡½æ•°å¯ä»¥å°†å€¼è¿”å›åˆ°è°ƒç”¨å®ƒä»¬çš„ä»£ç ä¸­ã€‚æ²¡æœ‰å‘½åè¿”å›å€¼ï¼Œä½†ç¡®å®åœ¨ç®­å¤´ï¼ˆ`->`ï¼‰åå£°æ˜äº†å®ƒä»¬çš„ç±»å‹ã€‚åœ¨Rustä¸­ï¼Œå‡½æ•°çš„è¿”å›å€¼ä¸å‡½æ•°ä¸»ä½“å—ä¸­æœ€ç»ˆè¡¨è¾¾å¼çš„å€¼åŒä¹‰ã€‚å¯ä»¥é€šè¿‡ä½¿ç”¨`return`å…³é”®å­—å¹¶æŒ‡å®šå€¼ä»å‡½æ•°ä¸­æå‰è¿”å›ï¼Œä½†æ˜¯å¤§å¤šæ•°å‡½æ•°éƒ½éšå¼è¿”å›æœ€åä¸€ä¸ªè¡¨è¾¾å¼ã€‚è¿™æ˜¯ä¸€ä¸ªè¿”å›å€¼çš„å‡½æ•°çš„ç¤ºä¾‹ï¼š

```rust
fn five() -> i32 {
    5
}

fn main() {
    let x = five();

    println!("The value of x is: {}", x);
}

```

å‡½æ•°ä¸­æ²¡æœ‰å‡½æ•°è°ƒç”¨ï¼Œå®ç”šè‡³`let`è¯­å¥ï¼Œ`five` ä»…æ˜¯æ•°å­—`5`æœ¬èº«ã€‚åœ¨Rustä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„å‡½æ•°ã€‚è¯·æ³¨æ„ï¼Œå‡½æ•°çš„è¿”å›ç±»å‹ä¹ŸæŒ‡å®šä¸º`-> i32`.

### Rustæ³¨é‡Š

æ‰€æœ‰ç¨‹åºå‘˜éƒ½åŠªåŠ›ä½¿ä»–ä»¬çš„ä»£ç æ˜“äºç†è§£ï¼Œä½†æ˜¯æœ‰æ—¶éœ€è¦é¢å¤–çš„è¯´æ˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¨‹åºå‘˜åœ¨å…¶æºä»£ç ä¸­ç•™ä¸‹æ³¨é‡Šæˆ– æ³¨é‡Šï¼Œç¼–è¯‘å™¨å°†å¿½ç•¥å®ƒä»¬ï¼Œä½†é˜…è¯»æºä»£ç çš„äººå¯èƒ½ä¼šå‘ç°æœ‰ç”¨ã€‚

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ³¨é‡Šï¼š

```rust

#![allow(unused_variables)]
fn main() {
// hello, world
}
```

### Rustæ§åˆ¶æµ

ä¸€ç§`if`è¡¨è¾¾å¼å…è®¸åˆ†æ”¯æ ¹æ®æ¡ä»¶çš„ä»£ç ã€‚æä¾›ä¸€ä¸ªæ¡ä»¶ï¼Œç„¶åè¯´ï¼šâ€œå¦‚æœæ»¡è¶³æ­¤æ¡ä»¶ï¼Œè¯·è¿è¡Œæ­¤ä»£ç å—ã€‚å¦‚æœä¸æ»¡è¶³æ¡ä»¶ï¼Œè¯·ä¸è¦è¿è¡Œæ­¤ä»£ç å—ã€‚â€

```rust
fn main() {
    let number = 3;

    if number < 5 {
        println!("condition was true");
    } else {
        println!("condition was false");
    }
}
```

å¯é€‰åœ°ï¼Œè¿˜å¯ä»¥åŒ…æ‹¬ä¸€ä¸ª`else`è¡¨è¾¾å¼ï¼Œåœ¨æ­¤å¤„é€‰æ‹©äº†è¯¥è¡¨è¾¾å¼ï¼Œä»¥åœ¨æ¡ä»¶è¯„ä¼°ä¸ºfalseæ—¶ä¸ºç¨‹åºæä¾›æ›¿ä»£çš„ä»£ç å—æ¥æ‰§è¡Œã€‚å¦‚æœä¸æä¾›`else`è¡¨è¾¾å¼ä¸”æ¡ä»¶ä¸ºå‡ï¼Œåˆ™ç¨‹åºå°†è·³è¿‡è¯¥ifå—å¹¶ç»§ç»­æ‰§è¡Œä¸‹ä¸€éƒ¨åˆ†ä»£ç ã€‚

```rust
fn main() {
    let number = 6;

    if number % 4 == 0 {
        println!("number is divisible by 4");
    } else if number % 3 == 0 {
        println!("number is divisible by 3");
    } else if number % 2 == 0 {
        println!("number is divisible by 2");
    } else {
        println!("number is not divisible by 4, 3, or 2");
    }
}
```

#### ä½¿ç”¨ifçš„letè¯­å¥

å› ä¸ºifæ˜¯è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å¯ä»¥åœ¨let è¯­å¥çš„å³ä¾§ä½¿ç”¨å®ƒï¼Œ

```rust
fn main() {
    let condition = true;
    let number = if condition {
        5
    } else {
        6
    };

    println!("The value of number is: {}", number);
}
```

#### å¾ªç¯é‡å¤

`loop`,`while`,`for`

```rust
fn main() {
    loop {
        println!("again!");
    }
}
```

##### ä»å¾ªç¯è¿”å›å€¼

açš„ç”¨é€”ä¹‹ä¸€loopæ˜¯é‡è¯•çŸ¥é“å¯èƒ½ä¼šå¤±è´¥çš„æ“ä½œï¼Œä¾‹å¦‚æ£€æŸ¥çº¿ç¨‹æ˜¯å¦å·²å®Œæˆå…¶å·¥ä½œã€‚ä½†æ˜¯ï¼Œå¯èƒ½éœ€è¦å°†è¯¥æ“ä½œçš„ç»“æœä¼ é€’ç»™å…¶ä½™ä»£ç ã€‚ä¸ºæ­¤ï¼Œå¯ä»¥åœ¨breakåœæ­¢å¾ªç¯çš„è¡¨è¾¾å¼åæ·»åŠ è¦è¿”å›çš„å€¼ã€‚è¯¥å€¼å°†ä»å¾ªç¯ä¸­è¿”å›ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å®ƒï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```rust
fn main() {
    let mut counter = 0;

    let result = loop {
        counter += 1;

        if counter == 10 {
            break counter * 2;
        }
    };

    println!("The result is {}", result);
}
```

##### æœ‰æ¡ä»¶å¾ªç¯ while

å¯¹äºç¨‹åºè€Œè¨€ï¼Œåœ¨å¾ªç¯ä¸­è¯„ä¼°æ¡ä»¶é€šå¸¸å¾ˆæœ‰ç”¨ã€‚å½“æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œå¾ªç¯è¿è¡Œã€‚å½“æ¡ä»¶ä¸å†ä¸ºçœŸæ—¶ï¼Œç¨‹åºå°†è°ƒç”¨breakï¼Œä»è€Œåœæ­¢å¾ªç¯ã€‚è¿™ä¸ªç¯å‹å¯ä½¿ç”¨çš„ç»„åˆæ¥å®ç°loopï¼Œifï¼Œelseï¼Œå’Œbreak; å¯ä»¥æ ¹æ®éœ€è¦åœ¨ç¨‹åºä¸­ç«‹å³å°è¯•ã€‚

```rust
fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{}!", number);

        number -= 1;
    }

    println!("LIFTOFF!!!");
}
```

##### éå†ä¸€ä¸ªé›†åˆ for

å¯ä»¥ä½¿ç”¨è¯¥whileæ„é€ éå†é›†åˆçš„å…ƒç´ ï¼Œä¾‹å¦‚æ•°ç»„ã€‚

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];
    let mut index = 0;

    while index < 5 {
        println!("the value is: {}", a[index]);

        index += 1;
    }
}
```

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];

    for element in a.iter() {
        println!("the value is: {}", element);
    }
}
```

forå¾ªç¯çš„å®‰å…¨æ€§å’Œç®€æ´æ€§ä½¿å…¶æˆä¸ºRustä¸­æœ€å¸¸ç”¨çš„å¾ªç¯æ„é€ ã€‚å³ä½¿åœ¨æƒ³è¦å¤šæ¬¡è¿è¡ŒæŸäº›ä»£ç çš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚whileæ¸…å•3-3 ä¸­ä½¿ç”¨å¾ªç¯çš„å€’è®¡æ—¶ç¤ºä¾‹ï¼‰ï¼Œå¤§å¤šæ•°Rustaceansä¹Ÿä¼šä½¿ç”¨forå¾ªç¯ã€‚è¿™æ ·åšçš„æ–¹æ³•æ˜¯ä½¿ç”¨Rangeï¼Œè¿™æ˜¯æ ‡å‡†åº“æä¾›çš„ä¸€ç§ç±»å‹ï¼Œå®ƒæŒ‰é¡ºåºç”Ÿæˆæ‰€æœ‰æ•°å­—ï¼Œä»ä¸€ä¸ªæ•°å­—å¼€å§‹åˆ°å¦ä¸€ä¸ªæ•°å­—ä¹‹å‰ç»“æŸã€‚

```rust
fn main() {
    for number in (1..4).rev() {
        println!("{}!", number);
    }
    println!("LIFTOFF!!!");
}
```

### Rustæ‰€æœ‰æƒ

Rustçš„ä¸»è¦ç‰¹å¾æ˜¯æ‰€æœ‰æƒã€‚å°½ç®¡è¯¥åŠŸèƒ½æ˜“äºè§£é‡Šï¼Œä½†å¯¹å…¶ä½™è¯­è¨€æœ‰æ·±è¿œçš„å½±å“ã€‚

æ‰€æœ‰ç¨‹åºå¿…é¡»åœ¨è¿è¡Œæ—¶ç®¡ç†å®ƒä»¬ä½¿ç”¨è®¡ç®—æœºå†…å­˜çš„æ–¹å¼ã€‚æŸäº›è¯­è¨€å…·æœ‰åƒåœ¾å›æ”¶åŠŸèƒ½ï¼Œè¯¥åƒåœ¾å›æ”¶åŠŸèƒ½ä¼šåœ¨ç¨‹åºè¿è¡Œæ—¶ä¸æ–­å¯»æ‰¾ä¸å†ä½¿ç”¨çš„å†…å­˜ã€‚åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œç¨‹åºå‘˜å¿…é¡»æ˜¾å¼åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚Rustä½¿ç”¨ç¬¬ä¸‰ç§æ–¹æ³•ï¼šé€šè¿‡æ‰€æœ‰æƒç³»ç»Ÿç®¡ç†å†…å­˜ï¼Œè¯¥ç³»ç»Ÿå…·æœ‰ä¸€ç»„åœ¨ç¼–è¯‘æ—¶æ£€æŸ¥çš„è§„åˆ™ã€‚ç¨‹åºè¿è¡Œæ—¶ï¼Œæ‰€æœ‰æ‰€æœ‰æƒåŠŸèƒ½éƒ½ä¸ä¼šå‡æ…¢å…¶è¿è¡Œé€Ÿåº¦ã€‚

å› ä¸ºæ‰€æœ‰æƒæ˜¯è®¸å¤šç¨‹åºå‘˜çš„æ–°æ¦‚å¿µï¼Œæ‰€ä»¥å®ƒç¡®å®éœ€è¦ä¸€äº›æ—¶é—´æ¥ä¹ æƒ¯ã€‚å¥½æ¶ˆæ¯æ˜¯ï¼Œå¯¹Rustå’Œæ‰€æœ‰æƒç³»ç»Ÿçš„è§„åˆ™è¶Šæœ‰ç»éªŒï¼Œå°±è¶Šèƒ½è‡ªç„¶å¼€å‘å®‰å…¨æœ‰æ•ˆçš„ä»£ç ã€‚ç»§ç»­å§ï¼

äº†è§£æ‰€æœ‰æƒåï¼Œå°†æ‹¥æœ‰åšå®çš„åŸºç¡€ï¼Œå¯ä»¥ç†è§£ä½¿Rustç‹¬æ ‘ä¸€å¸œçš„åŠŸèƒ½ã€‚åœ¨æœ¬ç« ä¸­ï¼Œå°†é€šè¿‡ä¸€äº›é’ˆå¯¹éå¸¸å¸¸è§çš„æ•°æ®ç»“æ„çš„ç¤ºä¾‹æ¥å­¦ä¹ æ‰€æœ‰æƒï¼šå­—ç¬¦ä¸²ã€‚

åœ¨è®¸å¤šç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä¸å¿…ç»å¸¸è€ƒè™‘å †æ ˆå’Œå †ã€‚ä½†æ˜¯åœ¨åƒRustè¿™æ ·çš„ç³»ç»Ÿç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå€¼æ˜¯åœ¨å †æ ˆä¸Šè¿˜æ˜¯åœ¨å †ä¸Šå¯¹è¯­è¨€çš„è¡Œä¸ºä»¥åŠä¸ºä»€ä¹ˆå¿…é¡»åšå‡ºæŸäº›å†³å®šçš„å½±å“æ›´å¤§ã€‚æ‰€æœ‰æƒçš„å„ä¸ªéƒ¨åˆ†å°†åœ¨æœ¬ç« åé¢çš„å †æ ˆå’Œå †ä¸­è¿›è¡Œä»‹ç»ï¼Œå› æ­¤è¿™é‡Œæ˜¯å‡†å¤‡å·¥ä½œçš„ç®€è¦è¯´æ˜ã€‚

å †æ ˆå’Œå †éƒ½æ˜¯å†…å­˜çš„ä¸€éƒ¨åˆ†ï¼Œçš„ä»£ç å¯åœ¨è¿è¡Œæ—¶ä½¿ç”¨ï¼Œä½†æ˜¯å®ƒä»¬çš„ç»“æ„ä¸åŒã€‚å †æ ˆæŒ‰è·å–å€¼çš„é¡ºåºå­˜å‚¨å€¼ï¼Œå¹¶ä»¥ç›¸åçš„é¡ºåºåˆ é™¤å€¼ã€‚è¿™ç§°ä¸ºåè¿›å…ˆå‡ºã€‚æƒ³æƒ³ä¸€å †ç›˜å­ï¼šæ·»åŠ æ›´å¤šç›˜å­æ—¶ï¼Œå°†å®ƒä»¬æ”¾åœ¨å †çš„é¡¶éƒ¨ï¼Œè€Œå½“éœ€è¦ç›˜å­æ—¶ï¼Œä»é¡¶éƒ¨å–ä¸‹ä¸€ä¸ªç›˜å­ã€‚ä»ä¸­é—´æˆ–åº•éƒ¨æ·»åŠ æˆ–åˆ é™¤æ¿éƒ½æ— æ³•æ­£å¸¸å·¥ä½œï¼æ·»åŠ æ•°æ®ç§°ä¸ºå‹å…¥å †æ ˆï¼Œè€Œåˆ é™¤æ•°æ®ç§°ä¸ºå¼¹å‡ºå †æ ˆã€‚

å †æ ˆä¸­å­˜å‚¨çš„æ‰€æœ‰æ•°æ®å¿…é¡»å…·æœ‰å·²çŸ¥çš„å›ºå®šå¤§å°ã€‚ç¼–è¯‘æ—¶å¤§å°æœªçŸ¥æˆ–å¤§å°å¯èƒ½æ›´æ”¹çš„æ•°æ®å¿…é¡»å­˜å‚¨åœ¨å †ä¸­ã€‚å †çš„ç»„ç»‡æ€§è¾ƒå·®ï¼šå°†æ•°æ®æ”¾åœ¨å †ä¸Šæ—¶ï¼Œéœ€è¦ä¸€å®šæ•°é‡çš„ç©ºé—´ã€‚æ“ä½œç³»ç»Ÿåœ¨å †ä¸­æ‰¾åˆ°ä¸€ä¸ªè¶³å¤Ÿå¤§çš„ç©ºç™½ç‚¹ï¼Œå°†å…¶æ ‡è®°ä¸ºæ­£åœ¨ä½¿ç”¨ä¸­ï¼Œç„¶åè¿”å›ä¸€ä¸ª æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæ˜¯è¯¥ä½ç½®çš„åœ°å€ã€‚æ­¤è¿‡ç¨‹ç§°ä¸º åœ¨å †ä¸Šåˆ†é…ï¼Œæœ‰æ—¶ä¹Ÿç®€ç§°ä¸ºallocatingã€‚å°†å€¼å‹å…¥å †æ ˆä¸è¢«è§†ä¸ºåˆ†é…ã€‚ç”±äºæŒ‡é’ˆæ˜¯å·²çŸ¥çš„å›ºå®šå¤§å°ï¼Œå› æ­¤å¯ä»¥å°†æŒ‡é’ˆå­˜å‚¨åœ¨å †æ ˆä¸Šï¼Œä½†æ˜¯å½“éœ€è¦å®é™…æ•°æ®æ—¶ï¼Œå¿…é¡»éµå¾ªæŒ‡é’ˆã€‚

#### Rustæ‰€æœ‰æƒè§„åˆ™

* Rustä¸­çš„æ¯ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªå˜é‡ï¼Œç§°ä¸ºå…¶æ‰€æœ‰è€…ã€‚
* ä¸€æ¬¡åªèƒ½æœ‰ä¸€ä¸ªæ‰€æœ‰è€…ã€‚
* å½“æ‰€æœ‰è€…è¶…å‡ºèŒƒå›´æ—¶ï¼Œè¯¥å€¼å°†è¢«åˆ é™¤

å¯ä»¥æ”¹å˜çš„å­—ç¬¦ä¸²

```rust

#![allow(unused_variables)]
fn main() {
let mut s = String::from("hello");

s.push_str(", world!"); // push_str() appends a literal to a String

println!("{}", s); // This will print `hello, world!`
}

```

#### å†…å­˜å’Œåˆ†é…

å¯¹äºå­—ç¬¦ä¸²æ–‡å­—ï¼Œåœ¨ç¼–è¯‘æ—¶å°±çŸ¥é“äº†å†…å®¹ï¼Œå› æ­¤æ–‡æœ¬ç›´æ¥ç¡¬ç¼–ç åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå­—ç¬¦ä¸²æ–‡å­—å¿«é€Ÿé«˜æ•ˆçš„åŸå› ã€‚ä½†æ˜¯è¿™äº›å±æ€§ä»…æ¥è‡ªå­—ç¬¦ä¸²æ–‡å­—çš„ä¸å˜æ€§ã€‚ä¸å¹¸çš„æ˜¯ï¼Œå¯¹äºåœ¨ç¼–è¯‘æ—¶æœªçŸ¥å¤§å°ä¸”åœ¨è¿è¡Œç¨‹åºæ—¶å¤§å°å¯èƒ½ä¼šæ”¹å˜çš„æ¯æ®µæ–‡æœ¬ï¼Œæ— æ³•å°†å†…å­˜å—æ”¾å…¥äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚

**å˜é‡ä¸æ•°æ®äº¤äº’çš„æ–¹å¼ï¼šå…‹éš†**

```rust

#![allow(unused_variables)]
fn main() {
let s1 = String::from("hello");
let s2 = s1.clone();

println!("s1 = {}, s2 = {}", s1, s2);
}

```

#### Rustå¯æ‹·è´ç±»å‹

* æ‰€æœ‰æ•´æ•°ç±»å‹ï¼Œä¾‹å¦‚u32ã€‚
* å¸ƒå°”ç±»å‹ï¼Œboolå€¼trueå’Œfalseã€‚
* æ‰€æœ‰æµ®ç‚¹ç±»å‹ï¼Œä¾‹å¦‚f64ã€‚
* å­—ç¬¦ç±»å‹charã€‚
* å…ƒç»„ï¼ˆå¦‚æœå®ƒä»¬ä»…åŒ…å«alsoçš„ç±»å‹ï¼‰Copyã€‚ä¾‹å¦‚ï¼Œ (i32, i32)æ˜¯Copyï¼Œä½†(i32, String)ä¸æ˜¯ã€‚

```rust
fn main() {
    let s = String::from("hello");  // s comes into scope

    takes_ownership(s);             // s's value moves into the function...
                                    // ... and so is no longer valid here

    let x = 5;                      // x comes into scope

    makes_copy(x);                  // x would move into the function,
                                    // but i32 is Copy, so itâ€™s okay to still
                                    // use x afterward

} // Here, x goes out of scope, then s. But because s's value was moved, nothing
  // special happens.

fn takes_ownership(some_string: String) { // some_string comes into scope
    println!("{}", some_string);
} // Here, some_string goes out of scope and `drop` is called. The backing
  // memory is freed.

fn makes_copy(some_integer: i32) { // some_integer comes into scope
    println!("{}", some_integer);
} // Here, some_integer goes out of scope. Nothing special happens.

```

#### è¿”å›å€¼å’ŒèŒƒå›´

è¿”å›å€¼ä¹Ÿå¯ä»¥è½¬ç§»æ‰€æœ‰æƒã€‚

```rust
fn main() {
    let s1 = gives_ownership();         // gives_ownership moves its return
                                        // value into s1

    let s2 = String::from("hello");     // s2 comes into scope

    let s3 = takes_and_gives_back(s2);  // s2 is moved into
                                        // takes_and_gives_back, which also
                                        // moves its return value into s3
} // Here, s3 goes out of scope and is dropped. s2 goes out of scope but was
  // moved, so nothing happens. s1 goes out of scope and is dropped.

fn gives_ownership() -> String {             // gives_ownership will move its
                                             // return value into the function
                                             // that calls it

    let some_string = String::from("hello"); // some_string comes into scope

    some_string                              // some_string is returned and
                                             // moves out to the calling
                                             // function
}

// takes_and_gives_back will take a String and return one
fn takes_and_gives_back(a_string: String) -> String { // a_string comes into
                                                      // scope

    a_string  // a_string is returned and moves out to the calling function
}
```

å˜é‡çš„æ‰€æœ‰æƒæ¯æ¬¡éƒ½éµå¾ªç›¸åŒçš„æ¨¡å¼ï¼šå°†å€¼åˆ†é…ç»™å¦ä¸€ä¸ªå˜é‡å°†å…¶ç§»åŠ¨ã€‚å½“åŒ…å«å †ä¸Šæ•°æ®çš„å˜é‡è¶…å‡ºèŒƒå›´æ—¶ï¼Œå°†æ¸…é™¤è¯¥å€¼ï¼Œdropé™¤éå·²å°†æ•°æ®ç§»è‡³å¦ä¸€ä¸ªå˜é‡æ‰€æ‹¥æœ‰ã€‚

æ‹¥æœ‰æ‰€æœ‰æƒç„¶åè¿”å›æ‰€æœ‰åŠŸèƒ½çš„æ‰€æœ‰æƒæœ‰ç‚¹ä¹å‘³ã€‚å¦‚æœè¦è®©å‡½æ•°ä½¿ç”¨å€¼è€Œä¸æ˜¯æ‰€æœ‰æƒæ€ä¹ˆåŠï¼Ÿä»¤äººååˆ†çƒ¦æ¼çš„æ˜¯ï¼Œé™¤äº†å¯èƒ½è¿˜æƒ³è¿”å›çš„å‡½æ•°ä¸»ä½“æ‰€äº§ç”Ÿçš„ä»»ä½•æ•°æ®ä¹‹å¤–ï¼Œå¦‚æœæƒ³è¦å†æ¬¡ä½¿ç”¨å®ƒï¼Œåˆ™è¿˜éœ€è¦å°†è¿”å›çš„ä¿¡æ¯ä¼ é€’å›å»ã€‚

å¯ä»¥ä½¿ç”¨å…ƒç»„è¿”å›å¤šä¸ªå€¼ï¼Œ

```rust
fn main() {
    let s1 = String::from("hello");

    let (s2, len) = calculate_length(s1);

    println!("The length of '{}' is {}.", s2, len);
}

fn calculate_length(s: String) -> (String, usize) {
    let length = s.len(); // len() returns the length of a String

    (s, length)
}
```

#### Rustå¼•ç”¨

```rust
fn main() {
    let s1 = String::from("hello");

    let len = calculate_length(&s1);

    println!("The length of '{}' is {}.", s1, len);
}

fn calculate_length(s: &String) -> usize {
    s.len()
}
```

*æ³¨æ„ï¼šä½¿ç”¨`&`è¿›è¡Œå¼•ç”¨çš„åä¹‰è¯æ˜¯è§£å¼•ç”¨ï¼Œè¿™æ˜¯é€šè¿‡è§£å¼•ç”¨è¿ç®—ç¬¦æ¥å®Œæˆçš„`*`ã€‚*

å¦‚æœå˜é‡åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸å¯å˜çš„ï¼Œå¼•ç”¨ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¸å…è®¸ä¿®æ”¹å¼•ç”¨çš„å†…å®¹ã€‚

##### å¯å˜å¼•ç”¨

```rust
fn main() {
    let mut s = String::from("hello");

    change(&mut s);
}

fn change(some_string: &mut String) {
    some_string.push_str(", world");
}
```

ä½†æ˜¯å¯å˜å¼•ç”¨æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é™åˆ¶ï¼šåªèƒ½åœ¨ä¸€ä¸ªç‰¹å®šèŒƒå›´å†…å¯¹ä¸€ä¸ªç‰¹å®šçš„æ•°æ®è¿›è¡Œä¸€ä¸ªå¯å˜å¼•ç”¨ã€‚ä¸‹é¢ä»£ç å°†å¤±è´¥ï¼š

```rust
let mut s = String::from("hello");

let r1 = &mut s;
let r2 = &mut s;

println!("{}, {}", r1, r2);

```

è¯¥é™åˆ¶å…è®¸çªå˜ï¼Œä½†æ˜¯ä»¥éå¸¸å—æ§çš„æ–¹å¼ã€‚è¿™æ˜¯æ–°çš„Rustaceansè‹¦è‹¦æŒ£æ‰çš„äº‹æƒ…ï¼Œå› ä¸ºå¤§å¤šæ•°è¯­è¨€éƒ½å…è®¸éšæ—¶æ›´æ”¹ã€‚

å…·æœ‰æ­¤é™åˆ¶çš„å¥½å¤„æ˜¯Rustå¯ä»¥é˜²æ­¢åœ¨ç¼–è¯‘æ—¶å‘ç”Ÿæ•°æ®äº‰ç”¨ã€‚ä¸€ä¸ªæ•°æ®çš„æ¯”èµ›ç›¸ä¼¼ï¼Œç«äº‰æ¡ä»¶ï¼Œå½“è¿™ä¸‰ç§è¡Œä¸ºçš„å‘ç”Ÿæƒ…å†µï¼š

* ä¸¤ä¸ªæˆ–å¤šä¸ªæŒ‡é’ˆåŒæ—¶è®¿é—®ç›¸åŒçš„æ•°æ®ã€‚
* è‡³å°‘æœ‰ä¸€ä¸ªæŒ‡é’ˆç”¨äºå†™å…¥æ•°æ®ã€‚
* æ²¡æœ‰ç”¨äºåŒæ­¥å¯¹æ•°æ®çš„è®¿é—®çš„æœºåˆ¶ã€‚

ä¸å¾€å¸¸ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨å¤§æ‹¬å·åˆ›å»ºæ–°çš„èŒƒå›´ï¼Œä»è€Œå…è®¸å¤šä¸ªå¯å˜å¼•ç”¨ï¼Œè€Œä¸èƒ½åŒæ—¶å¼•ç”¨ï¼š

```rust
#![allow(unused_variables)]
fn main() {
let mut s = String::from("hello");

{
    let r1 = &mut s;

} // r1 goes out of scope here, so we can make a new reference with no problems.

let r2 = &mut s;
}
```

##### æ‚¬ç©ºå¼•ç”¨

åœ¨å¸¦æœ‰æŒ‡é’ˆçš„è¯­è¨€ä¸­ï¼Œå¾ˆå®¹æ˜“é”™è¯¯åœ°åˆ›å»ºä¸€ä¸ªæ‚¬ç©ºæŒ‡é’ˆï¼Œå³é€šè¿‡åœ¨ä¿ç•™æŒ‡å‘è¯¥å†…å­˜çš„æŒ‡é’ˆçš„åŒæ—¶é‡Šæ”¾ä¸€äº›å†…å­˜æ¥å¼•ç”¨å¯èƒ½å·²åˆ†é…ç»™ä»–äººçš„å†…å­˜ä¸­æŸä¸ªä½ç½®çš„æŒ‡é’ˆã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨Rustä¸­ï¼Œç¼–è¯‘å™¨ä¿è¯å¼•ç”¨æ°¸è¿œä¸ä¼šæˆä¸ºæ‚¬æŒ‚å¼•ç”¨ï¼šå¦‚æœå¯¹æŸäº›æ•°æ®å…·æœ‰å¼•ç”¨ï¼Œåˆ™ç¼–è¯‘å™¨å°†ç¡®ä¿æ•°æ®ä¸ä¼šè¶…å‡ºå¯¹æ•°æ®çš„å¼•ç”¨èŒƒå›´ã€‚

è®©å°è¯•åˆ›å»ºä¸€ä¸ªæ‚¬ç©ºçš„å¼•ç”¨ï¼ŒRustå°†é€šè¿‡ç¼–è¯‘æ—¶é”™è¯¯é˜²æ­¢å®ƒï¼š

```rust
fn main() {
    let reference_to_nothing = dangle();
}

fn dangle() -> &String {
    let s = String::from("hello");

    &s
}
```

è¿™æ˜¯é”™è¯¯:

```rust
error[E0106]: missing lifetime specifier
 --> main.rs:5:16
  |
5 | fn dangle() -> &String {
  |                ^ expected lifetime parameter
  |
  = help: this function's return type contains a borrowed value, but there is
  no value for it to be borrowed from
  = help: consider giving it a 'static lifetime
```

### Ruståˆ‡ç‰‡ç±»å‹

sliceä¹Ÿæ˜¯å¦ä¸€ä¸ªæ²¡æœ‰æ‰€æœ‰æƒçš„æ•°æ®ç±»å‹ã€‚åˆ‡ç‰‡ä½¿å¯ä»¥å¼•ç”¨é›†åˆä¸­è¿ç»­çš„å…ƒç´ åºåˆ—ï¼Œè€Œä¸æ˜¯æ•´ä¸ªé›†åˆã€‚

```rust

#![allow(unused_variables)]
fn main() {
fn first_word(s: &String) -> usize {
    let bytes = s.as_bytes();

    for (i, &item) in bytes.iter().enumerate() {
        if item == b' ' {
            return i;
        }
    }

    s.len()
}
}
```

```rust

#![allow(unused_variables)]
fn main() {
let s = String::from("hello world");

let hello = &s[0..5];
let world = &s[6..11];
}
```

è¿™ç±»ä¼¼äºå¯¹æ•´ä½“è¿›è¡Œå¼•ç”¨ï¼Œ`String`ä½†è¦å¤šåŠ ä¸€ `[0..5]`ç‚¹ç‚¹ã€‚è€Œä¸æ˜¯æ•´ä¸ªå‚è€ƒStringï¼Œè€Œæ˜¯å¯¹çš„ä¸€éƒ¨åˆ†çš„å‚è€ƒStringã€‚

é€šè¿‡æŒ‡å®š`[starting_index..ending_index]`ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·å†…çš„èŒƒå›´æ¥åˆ›å»ºåˆ‡ç‰‡ ï¼Œå…¶ä¸­ï¼Œ`starting_index`æ˜¯åˆ‡ç‰‡ä¸­çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼Œæ¯”åˆ‡ç‰‡ä¸­`ending_index`çš„æœ€åä¸€ä¸ªä½ç½®å¤§ã€‚åœ¨å†…éƒ¨ï¼Œåˆ‡ç‰‡æ•°æ®ç»“æ„å­˜å‚¨åˆ‡ç‰‡çš„èµ·å§‹ä½ç½®å’Œé•¿åº¦ï¼Œè¯¥é•¿åº¦ä¸`ending_indexminus` ç›¸å¯¹åº”`starting_index`ã€‚å› æ­¤ï¼Œåœ¨çš„æƒ…å†µä¸‹`let world = &s[6..11];`ï¼Œ`world`å°†æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œè¯¥åˆ‡ç‰‡åŒ…å«ä¸€ä¸ªæŒ‡å‘ç¬¬7ä¸ªå­—èŠ‚ï¼ˆä»1å¼€å§‹ï¼‰çš„æŒ‡é’ˆï¼Œå…¶`s`é•¿åº¦å€¼ä¸º5ã€‚

ä½¿ç”¨Rustçš„..rangeè¯­æ³•ï¼Œå¦‚æœè¦ä»ç¬¬ä¸€ä¸ªç´¢å¼•ï¼ˆé›¶ï¼‰å¼€å§‹ï¼Œåˆ™å¯ä»¥åœ¨ä¸¤ä¸ªå¥ç‚¹ä¹‹å‰åˆ é™¤è¯¥å€¼ã€‚æ¢å¥è¯è¯´ï¼Œè¿™äº›æ˜¯ç›¸ç­‰çš„ï¼š

```rust

#![allow(unused_variables)]
fn main() {
let s = String::from("hello");

let slice = &s[0..2];
let slice = &s[..2];
}
```

åŒæ ·ï¼Œå¦‚æœçš„åˆ†ç‰‡åŒ…å«çš„æœ€åä¸€ä¸ªå­—èŠ‚ï¼Œåˆ™Stringå¯ä»¥åˆ é™¤å°¾éšæ•°å­—ã€‚è¿™æ„å‘³ç€è¿™äº›æ˜¯ç›¸ç­‰çš„ï¼š

```rust
#![allow(unused_variables)]
fn main() {
let s = String::from("hello");

let len = s.len();

let slice = &s[3..len];
let slice = &s[3..];
}
```

è¿˜å¯ä»¥åˆ é™¤ä¸¤ä¸ªå€¼ä»¥æˆªå–æ•´ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†ã€‚æ‰€ä»¥è¿™äº›æ˜¯ç›¸ç­‰çš„ï¼š

```rust
#![allow(unused_variables)]
fn main() {
let s = String::from("hello");

let len = s.len();

let slice = &s[0..len];
let slice = &s[..];
}
```

*æ³¨æ„ï¼šå­—ç¬¦ä¸²åˆ‡ç‰‡èŒƒå›´ç´¢å¼•å¿…é¡»å‡ºç°åœ¨æœ‰æ•ˆçš„UTF-8å­—ç¬¦è¾¹ç•Œå¤„ã€‚å¦‚æœå°è¯•åœ¨å¤šå­—èŠ‚å­—ç¬¦çš„ä¸­é—´åˆ›å»ºå­—ç¬¦ä¸²ç‰‡æ®µï¼Œåˆ™ç¨‹åºå°†é€€å‡ºå¹¶æ˜¾ç¤ºé”™è¯¯ã€‚*

```rust

#![allow(unused_variables)]
fn main() {
fn first_word(s: &String) -> &str {
    let bytes = s.as_bytes();

    for (i, &item) in bytes.iter().enumerate() {
        if item == b' ' {
            return &s[0..i];
        }
    }

    &s[..]
}
}
```

```rust
fn main() {
    let mut s = String::from("hello world");

    let word = first_word(&s);

    s.clear(); // error!

    println!("the first word is: {}", word);
}
```

è¿™æ˜¯ç¼–è¯‘å™¨é”™è¯¯ï¼š

```rust
error[E0502]: cannot borrow `s` as mutable because it is also borrowed as immutable
  --> src/main.rs:18:5
   |
16 |     let word = first_word(&s);
   |                           -- immutable borrow occurs here
17 |
18 |     s.clear(); // error!
   |     ^^^^^^^^^ mutable borrow occurs here
19 |
20 |     println!("the first word is: {}", word);
   |                                       ---- immutable borrow later used here
```

##### æ•°ç»„åˆ‡ç‰‡

```rust

#![allow(unused_variables)]
fn main() {
let a = [1, 2, 3, 4, 5];

let slice = &a[1..3];
}
```

è¯¥åˆ‡ç‰‡å…·æœ‰ç±»å‹`&[i32]`ã€‚é€šè¿‡å­˜å‚¨å¯¹ç¬¬ä¸€ä¸ªå…ƒç´ å’Œé•¿åº¦çš„å¼•ç”¨ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼ä¸å­—ç¬¦ä¸²åˆ‡ç‰‡ç›¸åŒã€‚

### Rustç»“æ„

è¦å®šä¹‰ä¸€ä¸ªç»“æ„ï¼Œè¾“å…¥å…³é”®å­—`struct`å¹¶å‘½åæ•´ä¸ªç»“æ„ã€‚ç»“æ„çš„åç§°åº”è¯´æ˜å°†æ•°æ®åˆ†ç»„åœ¨ä¸€èµ·çš„é‡è¦æ€§ã€‚ç„¶åï¼Œåœ¨å¤§æ‹¬å·å†…ï¼Œå®šä¹‰æ•°æ®æ®µçš„åç§°å’Œç±»å‹ï¼Œå°†å…¶ç§°ä¸ºfieldã€‚

```rust
#![allow(unused_variables)]
fn main() {
struct User {
    username: String,
    email: String,
    sign_in_count: u64,
    active: bool,
}
}
```

è¦åœ¨å®šä¹‰ç»“æ„åä½¿ç”¨ç»“æ„ï¼Œå¯ä»¥é€šè¿‡ä¸ºæ¯ä¸ªå­—æ®µæŒ‡å®šå…·ä½“å€¼æ¥åˆ›å»ºè¯¥ç»“æ„çš„å®ä¾‹ã€‚é€šè¿‡è¯´æ˜ç»“æ„çš„åç§°æ¥åˆ›å»ºå®ä¾‹ï¼Œç„¶åæ·»åŠ åŒ…å«`key: value`å¯¹çš„å¤§æ‹¬å·ï¼Œå…¶ä¸­é”®æ˜¯å­—æ®µçš„åç§°ï¼Œå€¼æ˜¯è¦å­˜å‚¨åœ¨è¿™äº›å­—æ®µä¸­çš„æ•°æ®ã€‚ä¸å¿…æŒ‰ç…§åœ¨ç»“æ„ä¸­å£°æ˜å®ƒä»¬çš„é¡ºåºæ¥æŒ‡å®šå­—æ®µã€‚æ¢å¥è¯è¯´ï¼Œç»“æ„å®šä¹‰å°±åƒè¯¥ç±»å‹çš„é€šç”¨æ¨¡æ¿ï¼Œå®ä¾‹ç”¨ç‰¹å®šçš„æ•°æ®å¡«å……è¯¥æ¨¡æ¿ä»¥åˆ›å»ºè¯¥ç±»å‹çš„å€¼ã€‚

```rust

#![allow(unused_variables)]
fn main() {
struct User {
    username: String,
    email: String,
    sign_in_count: u64,
    active: bool,
}

let mut user1 = User {
    email: String::from("someone@example.com"),
    username: String::from("someusername123"),
    active: true,
    sign_in_count: 1,
};

user1.email = String::from("anotheremail@example.com");
}

```

#### ä½¿ç”¨ç»“æ„æ›´æ–°è¯­æ³•ä»å…¶ä»–å®ä¾‹åˆ›å»ºå®ä¾‹

```rust

#![allow(unused_variables)]
fn main() {
struct User {
    username: String,
    email: String,
    sign_in_count: u64,
    active: bool,
}

let user1 = User {
    email: String::from("someone@example.com"),
    username: String::from("someusername123"),
    active: true,
    sign_in_count: 1,
};

let user2 = User {
    email: String::from("another@example.com"),
    username: String::from("anotherusername567"),
    ..user1
};
}
```

#### ä½¿ç”¨æ²¡æœ‰å‘½åå­—æ®µçš„å…ƒç»„ç»“æ„åˆ›å»ºä¸åŒçš„ç±»å‹

è¿˜å¯ä»¥å®šä¹‰çœ‹èµ·æ¥ç±»ä¼¼äºå…ƒç»„çš„ç»“æ„ï¼Œç§°ä¸ºå…ƒç»„ç»“æ„ã€‚å…ƒç»„ç»“æ„å…·æœ‰é™„åŠ çš„å«ä¹‰ï¼Œå³ç»“æ„åç§°æä¾›çš„å«ä¹‰ï¼Œä½†æ²¡æœ‰ä¸å…¶å­—æ®µå…³è”çš„åç§°ï¼›ç›¸åï¼Œå®ƒä»¬åªæ˜¯å­—æ®µçš„ç±»å‹ã€‚å½“æƒ³ç»™æ•´ä¸ªå…ƒç»„èµ·ä¸€ä¸ªåå­—å¹¶ä½¿å…ƒç»„æˆä¸ºä¸å…¶ä»–å…ƒç»„ä¸åŒçš„ç±»å‹æ—¶ï¼Œå…ƒç»„ç»“æ„å¾ˆæœ‰ç”¨ï¼Œå¹¶ä¸”åƒå¸¸è§„ç»“æ„ä¸­é‚£æ ·å‘½åæ¯ä¸ªå­—æ®µéƒ½æ˜¯å†—é•¿æˆ–å¤šä½™çš„ã€‚

è¦å®šä¹‰å…ƒç»„ç»“æ„ï¼Œè¯·ä»`struct`å…³é”®å­—å’Œç»“æ„åç§°å¼€å§‹ï¼Œåè·Ÿå…ƒç»„ä¸­çš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸¤ä¸ªåä¸º`Color`å’Œçš„å…ƒç»„ç»“æ„çš„å®šä¹‰å’Œç”¨æ³•`Point`ï¼š

```rust
#![allow(unused_variables)]
fn main() {
struct Color(i32, i32, i32);
struct Point(i32, i32, i32);

let black = Color(0, 0, 0);
let origin = Point(0, 0, 0);
}
```

è¯·æ³¨æ„ï¼Œ`black`å’Œ`origin`å€¼æ˜¯ä¸åŒçš„ç±»å‹ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ä¸åŒå…ƒç»„ç»“æ„çš„å®ä¾‹ã€‚æ‚¨å®šä¹‰çš„æ¯ä¸ªç»“æ„éƒ½æ˜¯å…¶è‡ªå·±çš„ç±»å‹ï¼Œå³ä½¿è¯¥ç»“æ„ä¸­çš„å­—æ®µå…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå³ä½¿ä¸¤ä¸ªç±»å‹éƒ½ç”±ä¸‰ä¸ªå€¼ç»„æˆï¼Œ`Color`å¸¦æœ‰ç±»å‹å‚æ•°çš„å‡½æ•°ä¹Ÿä¸èƒ½å°†a `Point`ä½œä¸ºå‚æ•°`i32`ã€‚å¦åˆ™ï¼Œå…ƒç»„`struct`å®ä¾‹çš„è¡Œä¸ºç±»ä¼¼äºå…ƒç»„ï¼šæ‚¨å¯ä»¥å°†å®ƒä»¬åˆ†è§£ä¸ºå„è‡ªçš„ç‰‡æ®µï¼Œå¯ä»¥ä½¿ç”¨.åè·Ÿç´¢å¼•çš„ç´¢å¼•æ¥è®¿é—®å•ä¸ªå€¼ï¼Œä¾æ­¤ç±»æ¨ã€‚

#### æ²¡æœ‰ä»»ä½•å­—æ®µçš„ç±»ä¼¼å•å…ƒçš„ç»“æ„

æ‚¨è¿˜å¯ä»¥å®šä¹‰æ²¡æœ‰ä»»ä½•å­—æ®µçš„ç»“æ„ï¼è¿™äº›ä¹‹æ‰€ä»¥ç§°ä¸º å•å…ƒçŠ¶ç»“æ„ï¼Œæ˜¯å› ä¸ºå®ƒä»¬çš„è¡Œä¸ºç±»ä¼¼äº`()`å•å…ƒç±»å‹ã€‚åœ¨éœ€è¦åœ¨æŸç§ç±»å‹ä¸Šå®ç°ç‰¹å¾ä½†åˆä¸æƒ³åœ¨ç±»å‹æœ¬èº«ä¸­å­˜å‚¨ä»»ä½•æ•°æ®çš„æƒ…å†µä¸‹ï¼Œç±»ä¼¼å•å…ƒçš„ç»“æ„å¾ˆæœ‰ç”¨ã€‚

```rust
struct User {
    username: &str,
    email: &str,
    sign_in_count: u64,
    active: bool,
}

fn main() {
    let user1 = User {
        email: "someone@example.com",
        username: "someusername123",
        active: true,
        sign_in_count: 1,
    };
}
```

#### ä½¿ç”¨ç»“æ„çš„ç¤ºä¾‹

```rust
fn main() {
    let width1 = 30;
    let height1 = 50;

    println!(
        "The area of the rectangle is {} square pixels.",
        area(width1, height1)
    );
}

fn area(width: u32, height: u32) -> u32 {
    width * height
}
```

```rust
fn main() {
    let rect1 = (30, 50);

    println!(
        "The area of the rectangle is {} square pixels.",
        area(rect1)
    );
}

fn area(dimensions: (u32, u32)) -> u32 {
    dimensions.0 * dimensions.1
}
```

```rust
struct Rectangle {
    width: u32,
    height: u32,
}

fn main() {
    let rect1 = Rectangle { width: 30, height: 50 };

    println!(
        "The area of the rectangle is {} square pixels.",
        area(&rect1)
    );
}

fn area(rectangle: &Rectangle) -> u32 {
    rectangle.width * rectangle.height
}
```

```rust
#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

fn main() {
    let rect1 = Rectangle { width: 30, height: 50 };

    println!("rect1 is {:?}", rect1);
}
```

### Rustæ–¹æ³•

æ–¹æ³•ç±»ä¼¼äºå‡½æ•°ï¼šå®ƒä»¬ç”¨fnå…³é”®å­—åŠå…¶åç§°å£°æ˜ï¼Œå®ƒä»¬å¯ä»¥å…·æœ‰å‚æ•°å’Œè¿”å›å€¼ï¼Œå¹¶ä¸”å®ƒä»¬åŒ…å«ä¸€äº›ä»å…¶ä»–åœ°æ–¹è°ƒç”¨å®ƒä»¬æ—¶å°†è¿è¡Œçš„ä»£ç ã€‚ä½†æ˜¯ï¼Œæ–¹æ³•ä¸å‡½æ•°çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä»¬æ˜¯åœ¨structçš„ä¸Šä¸‹æ–‡ä¸­å®šä¹‰çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°å§‹ç»ˆä¸ºselfï¼Œå®ƒè¡¨ç¤ºè°ƒç”¨è¯¥æ–¹æ³•çš„structå®ä¾‹ã€‚

```rust
#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    fn area(&self) -> u32 {
        self.width * self.height
    }
}

fn main() {
    let rect1 = Rectangle { width: 30, height: 50 };

    println!(
        "The area of the rectangle is {} square pixels.",
        rect1.area()
    );
}
```

```rust
fn main() {
    let rect1 = Rectangle { width: 30, height: 50 };
    let rect2 = Rectangle { width: 10, height: 40 };
    let rect3 = Rectangle { width: 60, height: 45 };

    println!("Can rect1 hold rect2? {}", rect1.can_hold(&rect2));
    println!("Can rect1 hold rect3? {}", rect1.can_hold(&rect3));
}
```

```rust

#![allow(unused_variables)]
fn main() {
#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    fn area(&self) -> u32 {
        self.width * self.height
    }

    fn can_hold(&self, other: &Rectangle) -> bool {
        self.width > other.width && self.height > other.height
    }
}
}
```

çš„å¦ä¸€ä¸ªæœ‰ç”¨çš„åŠŸèƒ½`impl`å—çš„æ˜¯ï¼Œæˆ‘ä»¬èƒ½å®šä¹‰èŒƒå›´å†…çš„åŠŸèƒ½implå—æ˜¯ä¸å¸¦selfä½œä¸ºå‚æ•°ã€‚è¿™äº›è¢«ç§°ä¸ºå…³è”å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬ä¸ç»“æ„å…³è”ã€‚å®ƒä»¬ä»ç„¶æ˜¯å‡½æ•°ï¼Œè€Œä¸æ˜¯æ–¹æ³•ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å¯ä½¿ç”¨çš„ç»“æ„å®ä¾‹ã€‚æ‚¨å·²ç»ä½¿ç”¨äº†String::fromå…³è”çš„åŠŸèƒ½ã€‚

å…³è”å‡½æ•°é€šå¸¸ç”¨äºå°†è¿”å›è¯¥ç»“æ„çš„æ–°å®ä¾‹çš„æ„é€ å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æä¾›ä¸€ä¸ªå…³è”çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°å°†å…·æœ‰ä¸€ä¸ªç»´åº¦å‚æ•°å¹¶å°†å…¶ç”¨ä½œå®½åº¦å’Œé«˜åº¦ï¼Œä»è€Œä½¿åˆ›å»ºæ­£æ–¹å½¢Rectangleè€Œä¸æ˜¯å¿…é¡»ä¸¤æ¬¡æŒ‡å®šç›¸åŒçš„å€¼å˜å¾—æ›´åŠ å®¹æ˜“ï¼š

```rust

#![allow(unused_variables)]
fn main() {
#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    fn square(size: u32) -> Rectangle {
        Rectangle { width: size, height: size }
    }
}
}
```

æ¯ä¸ªç»“æ„å…è®¸å…·æœ‰å¤šä¸ª`impl`å—ã€‚

```rust

#![allow(unused_variables)]
fn main() {
#[derive(Debug)]
struct Rectangle {
    width: u32,
    height: u32,
}

impl Rectangle {
    fn area(&self) -> u32 {
        self.width * self.height
    }
}

impl Rectangle {
    fn can_hold(&self, other: &Rectangle) -> bool {
        self.width > other.width && self.height > other.height
    }
}
}

```

### Rustæšä¸¾å’Œæ¨¡å¼åŒ¹é…

```rust

#![allow(unused_variables)]
fn main() {
enum IpAddrKind {
    V4,
    V6,
}
}
```

æˆ‘ä»¬å¯ä»¥`IpAddrKind`åƒè¿™æ ·åˆ›å»ºä¸¤ä¸ªå˜ä½“çš„æ¯ä¸€ä¸ªçš„å®ä¾‹ï¼š

```rust

#![allow(unused_variables)]
fn main() {
enum IpAddrKind {
    V4,
    V6,
}

let four = IpAddrKind::V4;
let six = IpAddrKind::V6;
}
```

è¯·æ³¨æ„ï¼Œæšä¸¾çš„å˜ä½“åœ¨å…¶æ ‡è¯†ç¬¦ä¸‹å‘½åç©ºé—´ï¼Œå¹¶ä¸”æˆ‘ä»¬ä½¿ç”¨åŒå†’å·å°†ä¸¤è€…åˆ†å¼€ã€‚ä¹‹æ‰€ä»¥æœ‰ç”¨ï¼Œæ˜¯å› ä¸ºç°åœ¨ä¸¤ä¸ªå€¼`IpAddrKind::V4`å’Œ`IpAddrKind::V6`éƒ½å…·æœ‰ç›¸åŒçš„ç±»å‹ï¼š `IpAddrKind`ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ç„¶åå¯ä»¥å®šä¹‰ä¸€ä¸ªæ¥å—ä»»æ„å€¼çš„å‡½æ•° `IpAddrKind`ï¼š

```rust

#![allow(unused_variables)]
fn main() {
enum IpAddrKind {
    V4,
    V6,
}

fn route(ip_kind: IpAddrKind) { }
}
```

```rust

#![allow(unused_variables)]
fn main() {
enum IpAddrKind {
    V4,
    V6,
}

struct IpAddr {
    kind: IpAddrKind,
    address: String,
}

let home = IpAddr {
    kind: IpAddrKind::V4,
    address: String::from("127.0.0.1"),
};

let loopback = IpAddr {
    kind: IpAddrKind::V6,
    address: String::from("::1"),
};
}
```

é€šè¿‡å°†æ•°æ®ç›´æ¥æ”¾å…¥æ¯ä¸ªæšä¸¾å˜é‡ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä»…ä½¿ç”¨æšä¸¾è€Œä¸æ˜¯ç»“æ„å†…éƒ¨çš„æšä¸¾ä»¥æ›´ç®€æ´çš„æ–¹å¼è¡¨ç¤ºç›¸åŒçš„æ¦‚å¿µã€‚è¿™ä¸ªæ–°çš„`IpAddr`æšä¸¾å®šä¹‰è¡¨ç¤º`V4`å’Œ`V6` å˜ä½“éƒ½å°†å…·æœ‰å…³è”çš„`String`å€¼ï¼š

```rust

#![allow(unused_variables)]
fn main() {
enum IpAddr {
    V4(String),
    V6(String),
}

let home = IpAddr::V4(String::from("127.0.0.1"));

let loopback = IpAddr::V6(String::from("::1"));
}
```

```rust

#![allow(unused_variables)]
fn main() {
enum Message {
    Quit,
    Move { x: i32, y: i32 },
    Write(String),
    ChangeColor(i32, i32, i32),
}
}
```

```rust

#![allow(unused_variables)]
fn main() {
struct QuitMessage; // unit struct
struct MoveMessage {
    x: i32,
    y: i32,
}
struct WriteMessage(String); // tuple struct
struct ChangeColorMessage(i32, i32, i32); // tuple struct
}
```

```rust

#![allow(unused_variables)]
fn main() {
enum Message {
    Quit,
    Move { x: i32, y: i32 },
    Write(String),
    ChangeColor(i32, i32, i32),
}

impl Message {
    fn call(&self) {
        // method body would be defined here
    }
}

let m = Message::Write(String::from("hello"));
m.call();
}
```

```rust

#![allow(unused_variables)]
fn main() {
enum Option<T> {
    Some(T),
    None,
}
}
```

è¯¥`Option<T>`æšä¸¾æ˜¯éå¸¸æœ‰ç”¨ï¼Œå®ƒç”šè‡³åŒ…æ‹¬ä¸­æ‹‰å¼€åºå¹•; æ‚¨æ— éœ€å°†å…¶æ˜ç¡®çº³å…¥èŒƒå›´ã€‚æ­¤å¤–ï¼Œå®ƒçš„å˜ä½“ä¹Ÿæ˜¯å¦‚æ­¤ï¼šæ‚¨å¯ä»¥ç›´æ¥ä½¿ç”¨`Some`å’Œ`None`ä¸å¸¦`Option::`å‰ç¼€ã€‚è¯¥ `Option<T>`æšä¸¾ä»ç„¶åªæ˜¯ä¸€ä¸ªæ™®é€šçš„æšä¸¾ï¼Œå¹¶`Some(T)`å’Œ`None`ç±»å‹ä»ç„¶å˜ç§`Option<T>`ã€‚

è¯¥`<T>`è¯­æ³•æ˜¯ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰è°ˆåˆ°å°šé”ˆçš„ç‰¹ç‚¹ã€‚è¿™æ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹å‚æ•°ï¼Œæˆ‘ä»¬å°†åœ¨ç¬¬10ç« ä¸­æ›´è¯¦ç»†åœ°ä»‹ç»æ³›å‹ã€‚ç°åœ¨ï¼Œæ‚¨åªéœ€è¦çŸ¥é“ï¼Œè¿™`<T>`æ„å‘³ç€æšä¸¾çš„Someå˜ä½“ Optionå¯ä»¥å®¹çº³ä»»ä½•ç±»å‹çš„æ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä½¿ç”¨Optionå€¼ä¿å­˜æ•°å­—ç±»å‹å’Œå­—ç¬¦ä¸²ç±»å‹çš„ç¤ºä¾‹ï¼š

```rust

#![allow(unused_variables)]
fn main() {
let some_number = Some(5);
let some_string = Some("a string");

let absent_number: Option<i32> = None;
}

```

#### Rustæ§åˆ¶æµè¿ç®—ç¬¦match

Rustå…·æœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æ§åˆ¶æµè¿ç®—ç¬¦matchï¼Œè¯¥è¿ç®—ç¬¦ä½¿æ‚¨å¯ä»¥å°†å€¼ä¸ä¸€ç³»åˆ—æ¨¡å¼è¿›è¡Œæ¯”è¾ƒï¼Œç„¶åæ ¹æ®åŒ¹é…çš„æ¨¡å¼æ‰§è¡Œä»£ç ã€‚æ¨¡å¼å¯ä»¥ç”±æ–‡å­—å€¼ï¼Œå˜é‡åï¼Œé€šé…ç¬¦å’Œè®¸å¤šå…¶ä»–å†…å®¹ç»„æˆï¼›

```rust

#![allow(unused_variables)]
fn main() {
enum Coin {
    Penny,
    Nickel,
    Dime,
    Quarter,
}

fn value_in_cents(coin: Coin) -> u8 {
    match coin {
        Coin::Penny => 1,
        Coin::Nickel => 5,
        Coin::Dime => 10,
        Coin::Quarter => 25,
    }
}
}
```

##### æ­é…Option<T>

```rust

#![allow(unused_variables)]
fn main() {
fn plus_one(x: Option<i32>) -> Option<i32> {
    match x {
        None => None,
        Some(i) => Some(i + 1),
    }
}

let five = Some(5);
let six = plus_one(five);
let none = plus_one(None);
}

```

##### `_`å ä½ç¬¦

```rust

#![allow(unused_variables)]
fn main() {
let some_u8_value = 0u8;
match some_u8_value {
    1 => println!("one"),
    3 => println!("three"),
    5 => println!("five"),
    7 => println!("seven"),
    _ => (),
}
}

```

### Rustæ¨¡å—

æ–‡ä»¶src.lib.rs

```rust
mod front_of_house {
    mod hosting {
        fn add_to_waitlist() {}
    }
}

pub fn eat_at_restaurant() {
    // Absolute path
    crate::front_of_house::hosting::add_to_waitlist();

    // Relative path
    front_of_house::hosting::add_to_waitlist();
}

```

#### ä½¿ç”¨pubå…³é”®å­—å…¬å¼€è·¯å¾„

```rust
mod front_of_house {
    pub mod hosting {
        fn add_to_waitlist() {}
    }
}

pub fn eat_at_restaurant() {
    // Absolute path
    crate::front_of_house::hosting::add_to_waitlist();

    // Relative path
    front_of_house::hosting::add_to_waitlist();
}

```

#### èµ·å§‹ç›¸å¯¹è·¯å¾„ super

```rust
fn serve_order() {}

mod back_of_house {
    fn fix_incorrect_order() {
        cook_order();
        super::serve_order();
    }

    fn cook_order() {}
}
fn main() {}

```

#### å…¬å¼€ç»“æ„å’Œæšä¸¾

```rust

#![allow(unused_variables)]
fn main() {
mod back_of_house {
    pub struct Breakfast {
        pub toast: String,
        seasonal_fruit: String,
    }

    impl Breakfast {
        pub fn summer(toast: &str) -> Breakfast {
            Breakfast {
                toast: String::from(toast),
                seasonal_fruit: String::from("peaches"),
            }
        }
    }
}

pub fn eat_at_restaurant() {
    // Order a breakfast in the summer with Rye toast
    let mut meal = back_of_house::Breakfast::summer("Rye");
    // Change our mind about what bread we'd like
    meal.toast = String::from("Wheat");
    println!("I'd like {} toast please", meal.toast);

    // The next line won't compile if we uncomment it; we're not allowed
    // to see or modify the seasonal fruit that comes with the meal
    // meal.seasonal_fruit = String::from("blueberries");
}
}

```

#### ä½¿ç”¨useå…³é”®å­—å°†è·¯å¾„çº³å…¥èŒƒå›´

```rust
mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
    hosting::add_to_waitlist();
    hosting::add_to_waitlist();
}
fn main() {}

```

è¿˜å¯ä»¥é€šè¿‡`use`å’Œç›¸å¯¹è·¯å¾„å°†æŸé¡¹çº³å…¥èŒƒå›´ã€‚

```rust
mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

use front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
    hosting::add_to_waitlist();
    hosting::add_to_waitlist();
}
fn main() {}

```

#### åˆ›å»ºæƒ¯ç”¨useè·¯å¾„

```rust
mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

use crate::front_of_house::hosting::add_to_waitlist;

pub fn eat_at_restaurant() {
    add_to_waitlist();
    add_to_waitlist();
    add_to_waitlist();
}
fn main() {}

```

#### ä½¿ç”¨aså…³é”®å­—æä¾›æ–°åç§°

```rust

#![allow(unused_variables)]
fn main() {
use std::fmt::Result;
use std::io::Result as IoResult;

fn function1() -> Result {
    // --snip--
    Ok(())
}

fn function2() -> IoResult<()> {
    // --snip--
    Ok(())
}
}

```

ç”¨ä»¥ä¸‹æ–¹å¼é‡æ–°å¯¼å‡ºåç§° pub use,å½“æˆ‘ä»¬ä½¿ç”¨useå…³é”®å­—å°†åç§°å¸¦å…¥èŒƒå›´æ—¶ï¼Œæ–°èŒƒå›´ä¸­å¯ç”¨çš„åç§°æ˜¯ç§æœ‰çš„ã€‚ä¸ºäº†ä½¿è°ƒç”¨æˆ‘ä»¬ä»£ç çš„ä»£ç èƒ½å¤Ÿåƒåœ¨è¯¥ä»£ç èŒƒå›´å†…å®šä¹‰è¯¥åç§°ä¸€æ ·å¼•ç”¨è¯¥åç§°ï¼Œæˆ‘ä»¬å¯ä»¥å°†pub å’Œç»„åˆåœ¨ä¸€èµ·useã€‚è¿™é¡¹æŠ€æœ¯ç§°ä¸ºé‡æ–°å¯¼å‡ºï¼Œå› ä¸ºæˆ‘ä»¬å°†æŸä¸ªé¡¹ç›®çº³å…¥èŒƒå›´ï¼ŒåŒæ—¶ä¹Ÿä½¿è¯¥é¡¹ç›®å¯ä¾›å…¶ä»–äººè¿›å…¥å…¶èŒƒå›´ã€‚

```rust
mod front_of_house {
    pub mod hosting {
        pub fn add_to_waitlist() {}
    }
}

pub use crate::front_of_house::hosting;

pub fn eat_at_restaurant() {
    hosting::add_to_waitlist();
    hosting::add_to_waitlist();
    hosting::add_to_waitlist();
}
fn main() {}

```

é€šè¿‡ä½¿ç”¨pub useï¼Œå¤–éƒ¨ä»£ç ç°åœ¨å¯ä»¥add_to_waitlistä½¿ç”¨è°ƒç”¨è¯¥å‡½æ•°hosting::add_to_waitlistã€‚å¦‚æœæœªæŒ‡å®špub useï¼Œåˆ™è¯¥ eat_at_restaurantå‡½æ•°å¯ä»¥hosting::add_to_waitliståœ¨å…¶ä½œç”¨åŸŸå†…è°ƒç”¨ï¼Œä½†æ˜¯å¤–éƒ¨ä»£ç æ— æ³•åˆ©ç”¨æ­¤æ–°è·¯å¾„ã€‚

å½“ä»£ç çš„å†…éƒ¨ç»“æ„ä¸è°ƒç”¨ä»£ç çš„ç¨‹åºå‘˜å¯¹åŸŸçš„æ€è€ƒæ–¹å¼ä¸åŒæ—¶ï¼Œé‡æ–°å¯¼å‡ºå¾ˆæœ‰ç”¨ã€‚

#### ä½¿ç”¨å¤–éƒ¨è½¯ä»¶åŒ…

è¯¥é¡¹ç›®ä½¿ç”¨ä¸€ä¸ªåä¸ºçš„å¤–éƒ¨è½¯ä»¶åŒ…randæ¥è·å–éšæœºæ•°ã€‚è¦randåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œæˆ‘ä»¬å°†æ­¤è¡Œæ·»åŠ åˆ°Cargo.tomlä¸­ï¼š

```toml
[dependencies]
rand = "0.5.5"

```

```rust
use rand::Rng;
fn main() {
    let secret_number = rand::thread_rng().gen_range(1, 101);
}

```

Rustç¤¾åŒºçš„æˆå‘˜å·²ç»åœ¨crates.ioä¸Šæä¾›äº†è®¸å¤šè½¯ä»¶åŒ… ï¼Œ

#### ä½¿ç”¨åµŒå¥—è·¯å¾„æ¸…ç†å¤§useåˆ—è¡¨

```rust

#![allow(unused_variables)]
fn main() {
use std::{cmp::Ordering, io};
// ---snip---
}

```

è¿™ä¸¤ä¸ªè·¯å¾„çš„å…±åŒéƒ¨åˆ†æ˜¯std::ioï¼Œè¿™å°±æ˜¯å®Œæ•´çš„ç¬¬ä¸€ä¸ªè·¯å¾„ã€‚è¦å°†è¿™ä¸¤ä¸ªè·¯å¾„åˆå¹¶ä¸ºä¸€æ¡useè¯­å¥ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨selfåµŒå¥—è·¯å¾„ï¼Œ

```rust

#![allow(unused_variables)]
fn main() {
use std::io::{self, Write};
}
r4
```

#### å…¨å±€è¿ç®—ç¬¦

å¦‚æœè¦å°†è·¯å¾„ä¸­å®šä¹‰çš„æ‰€æœ‰å…¬å…±é¡¹ç›®éƒ½çº³å…¥èŒƒå›´ï¼Œå¯ä»¥æŒ‡å®šè¯¥è·¯å¾„ï¼Œåè·Ÿ*ï¼Œå…¨å±€è¿ç®—ç¬¦ï¼š

```rust

#![allow(unused_variables)]
fn main() {
use std::collections::*;
}
```

### ç”¨å‘é‡å­˜å‚¨å€¼åˆ—è¡¨
